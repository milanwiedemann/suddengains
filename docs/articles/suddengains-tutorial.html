<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="suddengains">
<title>A tutorial on using the suddengains R package • suddengains</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A tutorial on using the suddengains R package">
<meta property="og:description" content="suddengains">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">suddengains</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/shinygains.html">shinygains: An interactive illustration of the suddengains R package</a>
    <a class="dropdown-item" href="../articles/suddengains-tutorial.html">A tutorial on using the suddengains R package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/milanwiedemann/suddengains/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="suddengains-tutorial_files/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="suddengains-tutorial_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="suddengains-tutorial_files/datatables-binding-0.27/datatables.js"></script><link href="suddengains-tutorial_files/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="suddengains-tutorial_files/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="suddengains-tutorial_files/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="suddengains-tutorial_files/dt-ext-fixedcolumns-1.12.1/css/fixedColumns.dataTables.min.css" rel="stylesheet">
<script src="suddengains-tutorial_files/dt-ext-fixedcolumns-1.12.1/js/dataTables.fixedColumns.min.js"></script><link href="suddengains-tutorial_files/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="suddengains-tutorial_files/crosstalk-1.2.0/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>A tutorial on using the suddengains R package</h1>
            
            <h4 data-toc-skip class="date">2023-02-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/milanwiedemann/suddengains/blob/HEAD/vignettes/suddengains-tutorial.Rmd" class="external-link"><code>vignettes/suddengains-tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>suddengains-tutorial.Rmd</code></div>
    </div>

    
    
<p>Please cite this vignette and the R package <code>suddengains</code>
as:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"suddengains"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To cite package 'suddengains' in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Wiedemann, M., Thew, G. R., Stott, R., &amp; Ehlers, A. (2020).</span></span>
<span><span class="co">#&gt;   suddengains: An R package to identify sudden gains in longitudinal</span></span>
<span><span class="co">#&gt;   data. PLOS ONE. https://doi.org/10.1371/journal.pone.0230276</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Article{,</span></span>
<span><span class="co">#&gt;     author = {Milan Wiedemann and Graham R Thew and Richard Stott and Anke Ehlers},</span></span>
<span><span class="co">#&gt;     title = {{suddengains}: {An} {R} package to identify sudden gains in longitudinal data},</span></span>
<span><span class="co">#&gt;     journal = {PLOS ONE},</span></span>
<span><span class="co">#&gt;     year = {2020},</span></span>
<span><span class="co">#&gt;     doi = {10.1371/journal.pone.0230276},</span></span>
<span><span class="co">#&gt;     url = {https://github.com/milanwiedemann/suddengains},</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette shows how the <code>suddengains</code> R package can be
used to help with the methods of research studies looking at sudden
gains as described by <span class="citation">Tang and DeRubeis (<a href="#ref-Tang1999">1999</a>)</span>. More about the theoretical
background of sudden gains and why it might be helpful to use this
package can be found in our paper <span class="citation">Wiedemann et
al. (<a href="#ref-R-suddengains">2020</a>)</span>. The following
vignette illustrates the main functions of the package using the example
data set <code>sgdata</code>.</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>Below are two interactive tables of depression and rumination scores
from the data set (<code>sgdata</code>) that comes with the
<code>suddengains</code> package. The data is automatically loaded
together with the package when running
<code><a href="https://milanwiedemann.github.io/suddengains/">library(suddengains)</a></code>. Each measured construct contains a
baseline measure (<strong>s0</strong>), twelve weekly measures during
therapy (<strong>s1</strong> to <strong>s12</strong>), and two follow-up
measures (<strong>fu1</strong> and <strong>fu2</strong>). Note that some
values for each measure are missing, shown here as empty cells. For an
example of a missing value see <strong>bdi_s2</strong> for <strong>id =
2</strong> in the table below.</p>
<div class="section level3">
<h3 id="depression-symptoms">Depression symptoms<a class="anchor" aria-label="anchor" href="#depression-symptoms"></a>
</h3>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ec281a8917f39182eb85" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ec281a8917f39182eb85">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],[33,26,40,33,39,35,null,40,33,34,30,32,34,37,25,null,40,33,33,27,37,38,34,31,30,27,36,29,25,30,37,35,32,31,36,43,37,39,37,35,36,55,56],[35,26,35,31,39,37,37,41,35,35,40,38,34,39,28,25,41,null,32,35,37,35,35,30,29,26,35,33,24,25,42,40,30,28,36,40,31,37,35,30,40,50,49],[37,null,38,30,37,null,null,37,34,35,null,38,33,37,19,null,37,38,30,24,36,20,33,25,27,26,34,27,23,26,36,34,28,22,19,39,26,35,34,31,41,45,47],[34,26,35,32,36,23,23,null,32,25,36,31,36,23,23,null,null,35,29,24,33,19,33,20,25,24,33,23,21,24,30,34,27,17,13,36,22,33,33,23,39,40,45],[23,null,37,22,26,null,21,null,23,25,37,23,23,null,12,null,null,24,28,22,33,21,32,15,25,24,29,null,21,24,26,30,27,12,11,34,17,32,24,22,30,38,37],[24,27,36,22,26,23,null,null,24,17,36,21,25,23,13,null,null,null,26,22,31,24,null,10,21,23,null,22,19,21,20,24,25,13,12,32,19,29,25,21,29,39,35],[21,17,37,20,23,21,21,null,22,17,37,22,23,21,null,null,null,22,23,21,29,25,25,5,22,20,null,19,16,19,14,24,24,11,11,28,18,27,22,10,26,15,21],[29,19,null,21,21,null,null,null,21,16,null,24,19,null,13,null,null,17,19,18,27,20,21,3,18,19,26,18,13,18,12,21,22,8,4,28,17,24,20,12,15,13,19],[17,11,35,19,19,null,null,null,17,16,34,25,18,null,null,null,null,16,21,16,27,16,21,1,19,16,23,14,14,17,13,18,20,20,22,null,14,22,16,11,12,10,5],[11,10,26,24,6,19,null,null,14,11,26,30,10,21,null,null,null,null,20,16,25,16,22,2,17,15,21,12,12,17,15,17,18,22,22,null,14,22,14,1,11,1,7],[11,3,24,33,7,null,null,null,10,9,25,31,9,null,null,null,null,9,20,14,25,13,23,3,14,15,20,13,10,15,12,18,20,18,18,null,13,20,12,2,3,2,8],[10,null,null,30,8,16,null,null,13,7,null,null,8,16,null,null,null,11,19,13,24,11,22,2,13,14,19,12,9,14,11,17,19,17,7,null,12,19,8,3,2,3,8],[7,7,19,28,8,13,20,null,11,8,19,25,9,14,22,20,null,13,12,12,23,10,21,1,14,13,23,11,4,6,10,16,12,20,20,20,11,18,9,8,0,3,8],[10,8,15,24,8,null,null,null,10,6,13,25,7,null,null,null,null,10,17,11,22,9,20,0,11,12,22,10,7,13,9,15,17,27,27,25,10,17,10,8,5,1,8],[8,8,14,20,6,12,14,null,7,9,15,21,7,13,15,14,null,8,16,10,21,8,19,1,10,11,21,9,6,12,8,14,16,27,27,24,9,16,8,8,2,3,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>bdi_s0<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>bdi_fu1<\/th>\n      <th>bdi_fu2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="rumination">Rumination<a class="anchor" aria-label="anchor" href="#rumination"></a>
</h3>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3aba8ea33ad76cecc2b1" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3aba8ea33ad76cecc2b1">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],[33,23,35,31,39,26,null,39,33,25,37,34,41,25,null,null,35,30,31,25,38,38,32,24,27,24,33,34,21,31,25,24,32,22,22,42,25,34,30,26,40,35,39],[35,27,41,30,42,27,24,41,37,35,26,38,38,34,26,25,40,null,30,28,38,35,35,20,28,29,34,26,21,25,23,21,31,17,17,38,23,38,39,25,39,56,58],[31,null,38,31,37,null,null,39,33,35,null,35,32,38,null,null,35,36,33,25,37,37,31,18,24,29,38,28,20,26,16,21,29,14,14,38,21,35,34,28,45,60,63],[35,24,35,27,37,22,23,null,31,25,36,33,35,24,21,0,0,34,27,23,35,28,31,15,26,23,32,26,22,24,22,23,28,12,12,34,19,37,35,24,37,41,45],[24,25,38,24,25,null,20,null,24,23,35,23,25,null,22,4,null,21,29,26,34,25,33,8,27,26,28,1,16,20,17,22,27,16,16,37,20,34,24,20,32,35,37],[21,16,38,22,26,23,null,null,21,20,40,21,26,26,26,0,1,null,26,20,31,29,null,10,21,23,0,22,17,22,16,22,26,12,12,31,19,27,27,20,29,45,37],[26,15,37,25,21,23,20,null,23,18,38,19,29,23,15,2,2,23,21,20,33,23,23,4,22,19,1,19,16,22,19,24,30,9,9,26,19,29,22,10,31,14,20],[20,17,null,21,23,null,null,null,17,18,null,25,19,null,0,0,5,19,20,18,28,26,22,null,13,19,26,20,16,16,14,24,20,4,4,28,17,20,20,10,16,16,19],[12,13,35,25,19,null,null,null,16,12,33,22,18,6,null,1,1,14,19,16,28,25,18,1,19,18,21,15,16,14,13,23,20,3,3,null,14,19,19,11,10,8,7],[15,16,28,30,8,19,null,null,12,15,24,29,13,20,null,5,0,null,19,15,21,23,26,3,18,16,20,11,12,15,18,18,19,6,6,null,13,22,16,2,10,null,7],[13,7,19,36,7,null,4,2,10,10,21,33,12,4,null,null,0,12,17,14,24,21,27,4,15,17,19,12,12,14,15,18,19,6,6,0,15,24,10,3,2,1,7],[13,10,null,27,12,13,null,null,10,7,null,null,6,14,0,null,null,12,18,15,21,20,18,4,13,13,19,13,11,14,11,15,20,3,3,4,11,19,13,3,6,3,7],[11,6,20,20,6,11,22,0,9,10,19,25,8,12,25,19,0,18,11,9,25,20,21,3,11,12,25,13,4,5,9,14,17,1,1,22,10,16,12,5,null,3,9],[10,10,19,23,10,null,null,null,12,5,14,23,6,null,null,null,3,12,15,10,20,18,16,null,17,13,22,8,1,11,8,13,17,2,2,25,11,18,14,10,3,null,8],[11,7,15,23,4,14,19,null,9,13,15,21,5,13,16,14,1,8,20,10,21,17,15,3,9,11,22,6,6,9,6,14,16,1,1,24,8,16,14,8,2,3,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>rq_s0<\/th>\n      <th>rq_s1<\/th>\n      <th>rq_s2<\/th>\n      <th>rq_s3<\/th>\n      <th>rq_s4<\/th>\n      <th>rq_s5<\/th>\n      <th>rq_s6<\/th>\n      <th>rq_s7<\/th>\n      <th>rq_s8<\/th>\n      <th>rq_s9<\/th>\n      <th>rq_s10<\/th>\n      <th>rq_s11<\/th>\n      <th>rq_s12<\/th>\n      <th>rq_fu1<\/th>\n      <th>rq_fu2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="preparation-of-data">Preparation of data<a class="anchor" aria-label="anchor" href="#preparation-of-data"></a>
</h2>
<div class="section level3">
<h3 id="select-cases">Select cases<a class="anchor" aria-label="anchor" href="#select-cases"></a>
</h3>
<p>The package offers two methods to select cases for the calculation of
sudden gains.</p>
<ol style="list-style-type: decimal">
<li>
<code>"pattern"</code>: cases providing enough data to apply the
<span class="citation">Tang and DeRubeis (<a href="#ref-Tang1999">1999</a>)</span> criteria will be selected</li>
<li>
<code>"min_sess"</code>: cases with a minimum number of available
data points (specified in <code>min_sess_num</code>) will be
selected</li>
</ol>
<p>By default the argument <code>return_id_lgl</code> is set to
<code>FALSE</code>, which adds a new variable named
<code>sg_select</code> at the end of the data frame specified in the
<code>data</code> argument. This newly calculated variable
<code>sg_select</code> is logical and indicates whether a case is
selected (<code>TRUE</code>) or not selected (<code>FALSE</code>) based
on the method specified. When the argument <code>return_id_lgl</code> is
set to <code>TRUE</code>, only the id variable specified in
<code>id_var_name</code> and the new variable <code>sg_select</code>
will be returned as the output of this function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. method = "pattern"</span></span>
<span><span class="fu"><a href="../reference/select_cases.html">select_cases</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>             id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>             sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                             <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                             <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>             method <span class="op">=</span> <span class="st">"pattern"</span>,</span>
<span>             return_id_lgl <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. method = "min_sess"</span></span>
<span><span class="fu"><a href="../reference/select_cases.html">select_cases</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>             id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>             sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                             <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                             <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>             method <span class="op">=</span> <span class="st">"min_sess"</span>,</span>
<span>             min_sess_num <span class="op">=</span> <span class="fl">9</span>,</span>
<span>             return_id_lgl <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The following code shows how to select cases based on the
<code>"pattern"</code> method and save them as an object called
<code>sgdata_select</code>. This function goes through the data and
selects all cases with at least one of the following data patterns.</p>
<table class="table">
<colgroup>
<col width="25%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
</colgroup>
<thead><tr class="header">
<th align="center">Data pattern</th>
<th>x<sub>n-2</sub>
</th>
<th>x<sub>n-1</sub>
</th>
<th>x<sub>n</sub>
</th>
<th>x<sub>n+1</sub>
</th>
<th>x<sub>n+2</sub>
</th>
<th>x<sub>n+3</sub>
</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">1.</td>
<td>.</td>
<td>x</td>
<td><strong>x</strong></td>
<td>x</td>
<td>x</td>
<td>.</td>
</tr>
<tr class="even">
<td align="center">2.</td>
<td>.</td>
<td>x</td>
<td><strong>x</strong></td>
<td>x</td>
<td>.</td>
<td>x</td>
</tr>
<tr class="odd">
<td align="center">3.</td>
<td>x</td>
<td>.</td>
<td><strong>x</strong></td>
<td>x</td>
<td>x</td>
<td>.</td>
</tr>
<tr class="even">
<td align="center">4.</td>
<td>x</td>
<td>.</td>
<td><strong>x</strong></td>
<td>x</td>
<td>.</td>
<td>x</td>
</tr>
</tbody>
</table>
<p><em>Note:</em> x<sub>n-2</sub> to x<sub>n+3</sub> are consecutive
data points of the primary outcome measure. “x” = Present data; “.” =
Missing data. “<strong>x</strong>” represents available data to be
examined as a possible pregain session.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sgdata_select</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_cases.html">select_cases</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>                              id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                              sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                              <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                             <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                              method <span class="op">=</span> <span class="st">"pattern"</span>,</span>
<span>                              return_id_lgl <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                 <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sg_select</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; The method 'pattern' was used to select cases.</span></span>
<span><span class="co">#&gt; See help('select_cases') for more information.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="identification-of-sudden-gains">Identification of sudden gains<a class="anchor" aria-label="anchor" href="#identification-of-sudden-gains"></a>
</h2>
<div class="section level3">
<h3 id="define-cut-off-for-first-criterion">Define cut-off for first criterion<a class="anchor" aria-label="anchor" href="#define-cut-off-for-first-criterion"></a>
</h3>
<p>This function calculates a cut-off value to use for the first sudden
gains criterion based on the Reliable Change Index <span class="citation">(RCI, <a href="#ref-Jacobson1991">Jacobson and Truax
1991</a>)</span>. The following 5 elements are returned by the
function</p>
<ul>
<li>
<code>sd</code>: Standard deviation manually entered using the
<code>sd</code> argument or the standard deviation of the values
specified in <code>data_sd</code>
</li>
<li>
<code>reliability</code>: Reliability of the measure manually
specified in <code>reliability</code> or the internal consistency
(Cronbach’s alpha) calculated from the item-by-item data specified in
<code>data_reliability</code>.</li>
<li>
<code>standard_error_measurement</code>: Standard error of
measurement, see formula below:</li>
</ul>
<p><span class="math display">\[
\text{standard_error_measurement} = {\text{sd}} \times
\sqrt{1-\text{reliability}}
\]</span></p>
<ul>
<li>
<code>standard_error_difference</code>: Standard error of the
difference between two test scores, see formula below:</li>
</ul>
<p><span class="math display">\[
\text{standard_error_difference} = \sqrt{2\times
(\text{standard_error_measurement})^2}
\]</span></p>
<ul>
<li>
<code>reliable_change_value</code>: Value that is considered to
reflect reliable change on a measure <span class="citation">(<a href="#ref-Jacobson1991">Jacobson and Truax 1991</a>)</span>. This value
is calculated using:</li>
</ul>
<p><span class="math display">\[\text{reliable_change_value} = 1.96
\times \text{standard_error_difference}\]</span></p>
<p>The last element of the list <code>sg_crit1_cutoff</code> can be used
as a cut-off value for the first sudden gains criterion.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define cut-off value for first SG criterion</span></span>
<span><span class="co"># The sd and the reliability are specified manually</span></span>
<span><span class="fu"><a href="../reference/define_crit1_cutoff.html">define_crit1_cutoff</a></span><span class="op">(</span>sd <span class="op">=</span> <span class="fl">10.5</span>,</span>
<span>                    reliability <span class="op">=</span> <span class="fl">0.931</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The reliability is specified manually</span></span>
<span><span class="co"># The sd gets calculated from variable "bdi_s0" in "sgdata" </span></span>
<span><span class="fu"><a href="../reference/define_crit1_cutoff.html">define_crit1_cutoff</a></span><span class="op">(</span>data_sd <span class="op">=</span> <span class="va">sgdata</span><span class="op">$</span><span class="va">bdi_s0</span>,</span>
<span>                    reliability <span class="op">=</span> <span class="fl">0.931</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="identify-sudden-gains-and-losses">Identify sudden gains and losses<a class="anchor" aria-label="anchor" href="#identify-sudden-gains-and-losses"></a>
</h3>
<p>To identify sudden gains/losses you can use the
<code>identify_sg</code> and <code>identify_sl</code> functions. These
functions return a data frame with new variables indicating for each
between-session interval whether a sudden gain/loss was identified. For
example the variable <code>sg_2to3</code> holds information whether a
sudden gains occurred from session two to three, with two being the
pregain and three being the postgain session.</p>
<div class="section level4">
<h4 id="sudden-gains">Sudden gains<a class="anchor" aria-label="anchor" href="#sudden-gains"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>The argument <code>crit123_details = TRUE</code> returns additional
information about whether each of the three sudden gains criteria are
met. More information about this can be found in the section
“Adaptations to the original sudden gains criteria” below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>If we wish to analyse sudden gains that occur immediately after the
first session, we include the option to specify a baseline measure in
<code>sg_var_list</code> (in this example <code>"bdi_s0"</code>) and set
<code>identify_sg_1to2 == TRUE</code>. This will allow the
identification of sudden gains between session 1 and session 2, provided
data from the baseline measure and the first session are available.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s0"</span>, </span>
<span>                            <span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="sudden-losses">Sudden losses<a class="anchor" aria-label="anchor" href="#sudden-losses"></a>
</h4>
<p>To identify sudden losses, you can use the <code>identify_sl</code>
function. All arguments are the same as in the <code>identify_sg</code>
function, but the <code>sg_crit1_cutoff</code> must be set to be a
negative value.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/identify_sl.html">identify_sl</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="op">-</span><span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="adaptations-to-the-original-sudden-gains-criteria">Adaptations to the original sudden gains criteria<a class="anchor" aria-label="anchor" href="#adaptations-to-the-original-sudden-gains-criteria"></a>
</h4>
<p>The package includes options for modifying or omitting the three
original sudden gains criteria suggested by <span class="citation">Tang
and DeRubeis (<a href="#ref-Tang1999">1999</a>)</span>:</p>
<ol style="list-style-type: decimal">
<li>The cut-off value for clinically meaningful change on the measure
used to identify sudden gains is specified using the argument
<code>sg_crit1_cutoff</code>. To omit the first criterion when
identifying sudden gains, this argument can be ‘switched off’ by using
<code>sg_crit1_cutoff = NULL</code>.</li>
<li>The minimum percentage drop from the pre- to post-gain session is
specified using the argument <code>sg_crit2_pct</code>. The default is a
minimum of a 25% drop, i.e. <code>sg_crit2_pct = 0.25</code>. To omit
the second criterion when identifying sudden gains, this argument can be
‘switched off’ by using <code>sg_crit2_pct = NULL</code>.</li>
<li>The third criterion can be ‘switched off’ using
<code>sg_crit3 = FALSE</code>. It is also possible to change the
significance level (<span class="math inline">\(\alpha\)</span>) used to
determine the critical value based on the student t distribution, by
default <code>sg_crit3_alpha = 0.05</code>.</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This example only uses the first and second sudden gains criteria </span></span>
<span><span class="co"># All following examples work the same for the "identify_sl()" function</span></span>
<span><span class="co"># The argument "crit123_details = TRUE" returns details about each between session interval for each criterion.</span></span>
<span><span class="co"># Details about the third criterion will show NAs for each between session interval because it's not being used (sg_crit3 = FALSE)</span></span>
<span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This example only uses the first, second, and a modified third sudden gains criterion (sg_crit3_alpha = 0.01)</span></span>
<span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            sg_crit3_alpha <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This example only uses the first criterion and a modified second criterion (50%) </span></span>
<span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="fl">0.50</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This example only uses the first criterion</span></span>
<span><span class="co"># Details about the second and third criterion will show NAs for each between session interval</span></span>
<span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># This example only uses the first criterion</span></span>
<span><span class="co"># Details about the second and third criterion will show NAs for each between session interval</span></span>
<span><span class="fu"><a href="../reference/identify_sg.html">identify_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>            sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>            sg_crit2_pct <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            sg_crit3 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>            sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                            <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                            <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>            identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            crit123_details <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="check-a-specific-intervals-for-a-sudden-gainloss">Check a specific intervals for a sudden gain/loss<a class="anchor" aria-label="anchor" href="#check-a-specific-intervals-for-a-sudden-gainloss"></a>
</h4>
<p>The function <strong><code><a href="../reference/check_interval.html">check_interval()</a></code></strong> can be
used to examine whether a specific between-session interval is a sudden
gain/loss.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check interval for sudden gain using all 3 criteria</span></span>
<span><span class="co"># No missing data, alpha = 0.05</span></span>
<span><span class="fu"><a href="../reference/check_interval.html">check_interval</a></span><span class="op">(</span>pre_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">32</span>, <span class="fl">31</span>, <span class="fl">33</span><span class="op">)</span>,</span>
<span>               post_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>               sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>               sg_crit2_pct <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>               sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               sg_crit3_alpha <span class="op">=</span> <span class="fl">.05</span>,</span>
<span>               identify <span class="op">=</span> <span class="st">"sg"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the thrid criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; # Check sudden gain</span></span>
<span><span class="co">#&gt; ## Met Criterion 1: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 2: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 3: YES</span></span>
<span><span class="co">#&gt; ## Sudden gain: YES</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Detailed output</span></span>
<span><span class="co">#&gt; ## Criterion 1: Cut-off: 7 </span></span>
<span><span class="co">#&gt; ## Criterion 2: Percentage change threshhold: 25 %</span></span>
<span><span class="co">#&gt; ## Criterion 3: Adjusted: YES, Critical value: 2.776</span></span>
<span><span class="co">#&gt; ## Number of pre gain values present: 3</span></span>
<span><span class="co">#&gt; ## Number of post gain values present: 3</span></span>
<span><span class="co">#&gt; ## Mean of pre gain values: 32</span></span>
<span><span class="co">#&gt; ## Mean of post gain values: 6</span></span>
<span><span class="co">#&gt; ## SD of pre gain values: 1</span></span>
<span><span class="co">#&gt; ## SD of post gain values: 1</span></span>
<span></span>
<span><span class="co"># Check interval for sudden gain using all 3 criteria</span></span>
<span><span class="co"># No missing data, alpha = 0.01</span></span>
<span><span class="fu"><a href="../reference/check_interval.html">check_interval</a></span><span class="op">(</span>pre_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">32</span>, <span class="fl">31</span>, <span class="fl">33</span><span class="op">)</span>,</span>
<span>               post_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>               sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>               sg_crit2_pct <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>               sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               sg_crit3_alpha <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>               identify <span class="op">=</span> <span class="st">"sg"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the thrid criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; # Check sudden gain</span></span>
<span><span class="co">#&gt; ## Met Criterion 1: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 2: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 3: YES</span></span>
<span><span class="co">#&gt; ## Sudden gain: YES</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Detailed output</span></span>
<span><span class="co">#&gt; ## Criterion 1: Cut-off: 7 </span></span>
<span><span class="co">#&gt; ## Criterion 2: Percentage change threshhold: 25 %</span></span>
<span><span class="co">#&gt; ## Criterion 3: Adjusted: YES, Critical value: 4.604</span></span>
<span><span class="co">#&gt; ## Number of pre gain values present: 3</span></span>
<span><span class="co">#&gt; ## Number of post gain values present: 3</span></span>
<span><span class="co">#&gt; ## Mean of pre gain values: 32</span></span>
<span><span class="co">#&gt; ## Mean of post gain values: 6</span></span>
<span><span class="co">#&gt; ## SD of pre gain values: 1</span></span>
<span><span class="co">#&gt; ## SD of post gain values: 1</span></span>
<span></span>
<span><span class="co"># Check intervall for sudden gain using only third criterion</span></span>
<span><span class="co"># Some missing data, alpha = 0.01</span></span>
<span><span class="fu"><a href="../reference/check_interval.html">check_interval</a></span><span class="op">(</span>pre_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">31</span>, <span class="fl">33</span><span class="op">)</span>,</span>
<span>               post_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>               sg_crit1_cutoff <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>               sg_crit2_pct <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>               sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               sg_crit3_alpha <span class="op">=</span> <span class="fl">.01</span>,</span>
<span>               identify <span class="op">=</span> <span class="st">"sg"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Third sudden gains criterion was applied.</span></span>
<span><span class="co">#&gt; The critical value for the thrid criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; # Check sudden gain</span></span>
<span><span class="co">#&gt; ## Met Criterion 1: NA</span></span>
<span><span class="co">#&gt; ## Met Criterion 2: NA</span></span>
<span><span class="co">#&gt; ## Met Criterion 3: YES</span></span>
<span><span class="co">#&gt; ## Sudden gain: YES</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Detailed output</span></span>
<span><span class="co">#&gt; ## Criterion 1: Cut-off: Criterion 1 was not applied</span></span>
<span><span class="co">#&gt; ## Criterion 2: Percentage change threshhold: Criterion 2 was not applied</span></span>
<span><span class="co">#&gt; ## Criterion 3: Adjusted: YES, Critical value: 9.925</span></span>
<span><span class="co">#&gt; ## Number of pre gain values present: 2</span></span>
<span><span class="co">#&gt; ## Number of post gain values present: 2</span></span>
<span><span class="co">#&gt; ## Mean of pre gain values: 32</span></span>
<span><span class="co">#&gt; ## Mean of post gain values: 6</span></span>
<span><span class="co">#&gt; ## SD of pre gain values: 1.414</span></span>
<span><span class="co">#&gt; ## SD of post gain values: 1.414</span></span>
<span></span>
<span><span class="co"># Check intervall for sudden loss using all three criteria</span></span>
<span><span class="co"># Some missing data, alpha = 0.05</span></span>
<span><span class="fu"><a href="../reference/check_interval.html">check_interval</a></span><span class="op">(</span>pre_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>               post_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">12</span>, <span class="fl">14</span><span class="op">)</span>,</span>
<span>               sg_crit1_cutoff <span class="op">=</span> <span class="op">-</span><span class="fl">7</span>,</span>
<span>               sg_crit2_pct <span class="op">=</span> <span class="fl">.25</span>,</span>
<span>               sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>               sg_crit3_alpha <span class="op">=</span> <span class="fl">.05</span>,</span>
<span>               identify <span class="op">=</span> <span class="st">"sl"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the thrid criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; # Check sudden loss</span></span>
<span><span class="co">#&gt; ## Met Criterion 1: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 2: YES</span></span>
<span><span class="co">#&gt; ## Met Criterion 3: YES</span></span>
<span><span class="co">#&gt; ## Sudden loss: YES</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # Detailed output</span></span>
<span><span class="co">#&gt; ## Criterion 1: Cut-off: -7 </span></span>
<span><span class="co">#&gt; ## Criterion 2: Percentage change threshhold: 25 %</span></span>
<span><span class="co">#&gt; ## Criterion 3: Adjusted: YES, Critical value: 3.182</span></span>
<span><span class="co">#&gt; ## Number of pre gain values present: 2</span></span>
<span><span class="co">#&gt; ## Number of post gain values present: 3</span></span>
<span><span class="co">#&gt; ## Mean of pre gain values: 6</span></span>
<span><span class="co">#&gt; ## Mean of post gain values: 14</span></span>
<span><span class="co">#&gt; ## SD of pre gain values: 1.414</span></span>
<span><span class="co">#&gt; ## SD of post gain values: 2</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="create-datasets-for-further-analysis">Create datasets for further analysis<a class="anchor" aria-label="anchor" href="#create-datasets-for-further-analysis"></a>
</h2>
<div class="section level3">
<h3 id="all-gains-one-row-per-gain">All gains: One row per gain<a class="anchor" aria-label="anchor" href="#all-gains-one-row-per-gain"></a>
</h3>
<p>In the <code>suddengains</code> R package we refer to this as “bysg”
(by sudden gain).</p>
<p>Here we see code to create a “bysg” data set identifying sudden gains
(specified using the argument <code>identify = "sg"</code>) and save it
to the object called “bysg”. The table below shows the output including
the following 15 new variables:</p>
<ul>
<li>
<code>id_sg</code>: Unique identifier for each sudden gain</li>
<li>
<code>sg_crit123</code>: Logical variable indicating whether a
sudden gain was identified</li>
<li>
<code>sg_session_n</code>: Pregain session number</li>
<li>
<code>sg_freq_byperson</code>: Frequency of sudden gains identified
for each case (<code>id</code>)</li>
<li>
<code>sg_bdi_2n</code>, <code>sg_bdi_1n</code>,
<code>sg_bdi_n</code>, <code>sg_bdi_n1</code>, <code>sg_bdi_n2</code>,
<code>sg_bdi_n3</code>: Six extracted values of the sudden gains measure
around the sudden gain</li>
<li>
<code>sg_magnitude</code>: Magnitude of the sudden gain for each
case</li>
<li>
<code>sg_**bdi**_tx_change</code>: Total change on the sudden gains
measure from start (<code>tx_start_var_name</code>) to end
(<code>tx_end_var_name</code>) for each case</li>
<li>
<code>sg_change_proportion</code>: Magnitude of the sudden gain
(<code>sg_magnitude</code>) divided by the total change
<code>sg_bdi_tx_change</code>
</li>
<li>
<code>sg_reversal_value</code>: Value representing the threshold for
the sudden gain to be considered ‘reversed’</li>
<li>
<code>sg_reversal</code>: Logical variable indicating whether a
sudden gain reversed</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bysg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_bysg.html">create_bysg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>                    sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                    id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                    tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                    tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                    sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                    <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                    <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                    sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span>
<span>                    identify <span class="op">=</span> <span class="st">"sg"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the third criterion was adjusted for missingness.</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9b84b8cc5d65473bb4ea" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9b84b8cc5d65473bb4ea">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,1,3,4,5,5,9,10,10,12,13,13,14,18,39,40,40,40,41,41,42,42,43,43],["1_sg_3","1_sg_7","3_sg_8","4_sg_3","5_sg_3","5_sg_8","9_sg_3","10_sg_2","10_sg_4","12_sg_3","13_sg_3","13_sg_8","14_sg_2","18_sg_3","39_sg_3","40_sg_2","40_sg_5","40_sg_8","41_sg_6","41_sg_9","42_sg_5","42_sg_8","43_sg_5","43_sg_7"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[3,7,8,3,3,8,3,2,4,3,3,8,2,3,3,2,5,8,6,9,5,8,5,7],[2,2,1,1,2,2,1,2,2,1,2,2,1,1,1,3,3,3,2,2,2,2,2,2],[35,35,35,31,39,39,35,35,35,38,34,34,39,null,35,30,30,30,40,40,50,50,49,49],[37,37,38,30,37,37,34,35,35,38,33,33,37,38,34,31,31,31,41,41,45,45,47,47],[34,34,35,32,36,36,32,25,25,31,36,36,23,35,33,23,23,23,39,39,40,40,45,45],[23,23,37,22,26,26,23,25,25,23,23,23,null,24,24,22,22,22,30,30,38,38,37,37],[24,24,36,22,26,26,24,17,17,21,25,25,23,null,25,21,21,21,29,29,39,39,35,35],[21,21,37,20,23,23,22,17,17,22,23,23,21,22,22,10,10,10,26,26,15,15,21,21],[29,29,null,21,21,21,21,16,16,24,19,19,null,17,20,12,12,12,15,15,13,13,19,19],[17,17,35,19,19,19,17,16,16,25,18,18,null,16,16,11,11,11,12,12,10,10,5,5],[11,11,26,24,6,6,14,11,11,30,10,10,21,null,14,1,1,1,11,11,1,1,7,7],[11,11,24,33,7,7,10,9,9,31,9,9,null,9,12,2,2,2,3,3,2,2,8,8],[10,10,null,30,8,8,13,7,7,null,8,8,16,11,8,3,3,3,2,2,3,3,8,8],[7,7,19,28,8,8,11,8,8,25,9,9,14,13,9,8,8,8,0,0,3,3,8,8],[35,24,37,31,39,23,35,null,35,38,34,23,null,null,35,null,23,10,30,15,40,15,45,35],[37,21,null,30,37,21,34,35,25,38,33,19,39,38,34,30,22,12,29,12,38,13,37,21],[34,29,35,32,36,19,32,35,25,31,36,18,37,35,33,31,21,11,26,11,39,10,35,19],[23,17,26,22,26,6,23,25,17,23,23,10,23,24,24,23,10,1,15,3,15,1,21,5],[24,11,24,22,26,7,24,25,17,21,25,9,null,null,25,22,12,2,12,2,13,2,19,7],[21,11,null,20,23,8,22,17,16,22,23,8,23,22,22,21,11,3,11,0,10,3,5,8],[11,12,9,10,10,13,9,10,8,8,13,8,14,11,9,8,11,10,11,8,24,9,14,14],[28,28,16,3,31,31,24,27,27,13,25,25,25,null,26,22,22,22,40,40,47,47,41,41],[0.392857142857143,0.428571428571429,0.5625,3.33333333333333,0.32258064516129,0.419354838709677,0.375,0.37037037037037,0.296296296296296,0.615384615384615,0.52,0.32,0.56,null,0.346153846153846,0.363636363636364,0.5,0.454545454545455,0.275,0.2,0.51063829787234,0.191489361702128,0.341463414634146,0.341463414634146],[28.5,23,30.5,27,31,12.5,27.5,30,21,27,29.5,14,30,29.5,28.5,27,15.5,6,20.5,7,27,5.5,28,12],[1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>id_sg<\/th>\n      <th>sg_crit123<\/th>\n      <th>sg_session_n<\/th>\n      <th>sg_freq_byperson<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>sg_bdi_2n<\/th>\n      <th>sg_bdi_1n<\/th>\n      <th>sg_bdi_n<\/th>\n      <th>sg_bdi_n1<\/th>\n      <th>sg_bdi_n2<\/th>\n      <th>sg_bdi_n3<\/th>\n      <th>sg_magnitude<\/th>\n      <th>sg_bdi_tx_change<\/th>\n      <th>sg_change_proportion<\/th>\n      <th>sg_reversal_value<\/th>\n      <th>sg_reversal<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Here we see code to create a “bysg” data set identifying sudden
losses (specified using the argument <code>identify = "sl"</code>) and
save it to the object called “bysl”. The following table shows the
output.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bysl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_bysg.html">create_bysg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>                    sg_crit1_cutoff <span class="op">=</span> <span class="op">-</span><span class="fl">7</span>,</span>
<span>                    id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                    tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                    tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                    sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                    <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                    <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                    sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span>
<span>                    identify <span class="op">=</span> <span class="st">"sl"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the third criterion was adjusted for missingness.</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-00e14073117934fc821c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-00e14073117934fc821c">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[4,34,35],["4_sg_9","34_sg_7","35_sg_7"],[1,1,1],[9,7,7],[1,1,1],[31,28,36],[30,22,19],[32,17,13],[22,12,11],[22,13,12],[20,11,11],[21,8,4],[19,20,22],[24,22,22],[33,18,18],[30,17,7],[28,20,20],[21,13,12],[19,11,11],[24,8,4],[33,20,22],[30,22,22],[28,18,18],[-9,-12,-18],[3,8,16],[3,1.5,1.125],[28.5,14,13],[1,0,1]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>id_sg<\/th>\n      <th>sg_crit123<\/th>\n      <th>sg_session_n<\/th>\n      <th>sg_freq_byperson<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>sg_bdi_2n<\/th>\n      <th>sg_bdi_1n<\/th>\n      <th>sg_bdi_n<\/th>\n      <th>sg_bdi_n1<\/th>\n      <th>sg_bdi_n2<\/th>\n      <th>sg_bdi_n3<\/th>\n      <th>sg_magnitude<\/th>\n      <th>sg_bdi_tx_change<\/th>\n      <th>sg_change_proportion<\/th>\n      <th>sg_reversal_value<\/th>\n      <th>sg_reversal<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="all-cases-one-row-per-case">All cases: One row per case<a class="anchor" aria-label="anchor" href="#all-cases-one-row-per-case"></a>
</h3>
<p>In the <code>suddengains</code> R package we refer to this as
byperson (by person). This data set includes all cases with and all
cases without sudden gains. If multiple sudden gains were experienced by
a case, the argument <code>multiple_sg_select</code> is used to specify
which gain should be selected; in the example below the first gain will
be selected.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">byperson_first</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_byperson.html">create_byperson</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>                                  sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                                  id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                                  tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                                  tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                                  sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                                  <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                                  <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                                  sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span>
<span>                                  identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                  multiple_sg_select <span class="op">=</span> <span class="st">"first"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the third criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; The first gain/loss was selected in case of multiple gains/losses.</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-92521c30421b3f7e9c26" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-92521c30421b3f7e9c26">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],["1_sg_3",null,"3_sg_8","4_sg_3","5_sg_3",null,null,null,"9_sg_3","10_sg_2",null,"12_sg_3","13_sg_3","14_sg_2",null,null,null,"18_sg_3",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"39_sg_3","40_sg_2","41_sg_6","42_sg_5","43_sg_5"],[1,0,1,1,1,0,0,0,1,1,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[3,null,8,3,3,null,null,null,3,2,null,3,3,2,null,null,null,3,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,2,6,5,5],[2,0,1,1,2,0,0,0,1,2,0,1,2,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2,2,2],[35,null,37,31,39,null,null,null,35,null,null,38,34,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,35,null,30,40,45],[37,null,null,30,37,null,null,null,34,35,null,38,33,39,null,null,null,38,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34,30,29,38,37],[34,null,35,32,36,null,null,null,32,35,null,31,36,37,null,null,null,35,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,33,31,26,39,35],[23,null,26,22,26,null,null,null,23,25,null,23,23,23,null,null,null,24,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24,23,15,15,21],[24,null,24,22,26,null,null,null,24,25,null,21,25,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,25,22,12,13,19],[21,null,null,20,23,null,null,null,22,17,null,22,23,23,null,null,null,22,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,22,21,11,10,5],[11,null,9,10,10,null,null,null,9,10,null,8,13,14,null,null,null,11,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,9,8,11,24,14],[28,null,16,3,31,null,null,null,24,27,null,13,25,25,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26,22,40,47,41],[0.392857142857143,null,0.5625,3.33333333333333,0.32258064516129,null,null,null,0.375,0.37037037037037,null,0.615384615384615,0.52,0.56,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.346153846153846,0.363636363636364,0.275,0.51063829787234,0.341463414634146],[28.5,null,30.5,27,31,null,null,null,27.5,30,null,27,29.5,30,null,null,null,29.5,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28.5,27,20.5,27,28],[1,null,0,1,0,null,null,null,0,0,null,1,0,0,null,null,null,0,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0,0,0,0,0],[33,26,40,33,39,35,null,40,33,34,30,32,34,37,25,null,40,33,33,27,37,38,34,31,30,27,36,29,25,30,37,35,32,31,36,43,37,39,37,35,36,55,56],[35,26,35,31,39,37,37,41,35,35,40,38,34,39,28,25,41,null,32,35,37,35,35,30,29,26,35,33,24,25,42,40,30,28,36,40,31,37,35,30,40,50,49],[37,null,38,30,37,null,null,37,34,35,null,38,33,37,19,null,37,38,30,24,36,20,33,25,27,26,34,27,23,26,36,34,28,22,19,39,26,35,34,31,41,45,47],[34,26,35,32,36,23,23,null,32,25,36,31,36,23,23,null,null,35,29,24,33,19,33,20,25,24,33,23,21,24,30,34,27,17,13,36,22,33,33,23,39,40,45],[23,null,37,22,26,null,21,null,23,25,37,23,23,null,12,null,null,24,28,22,33,21,32,15,25,24,29,null,21,24,26,30,27,12,11,34,17,32,24,22,30,38,37],[24,27,36,22,26,23,null,null,24,17,36,21,25,23,13,null,null,null,26,22,31,24,null,10,21,23,null,22,19,21,20,24,25,13,12,32,19,29,25,21,29,39,35],[21,17,37,20,23,21,21,null,22,17,37,22,23,21,null,null,null,22,23,21,29,25,25,5,22,20,null,19,16,19,14,24,24,11,11,28,18,27,22,10,26,15,21],[29,19,null,21,21,null,null,null,21,16,null,24,19,null,13,null,null,17,19,18,27,20,21,3,18,19,26,18,13,18,12,21,22,8,4,28,17,24,20,12,15,13,19],[17,11,35,19,19,null,null,null,17,16,34,25,18,null,null,null,null,16,21,16,27,16,21,1,19,16,23,14,14,17,13,18,20,20,22,null,14,22,16,11,12,10,5],[11,10,26,24,6,19,null,null,14,11,26,30,10,21,null,null,null,null,20,16,25,16,22,2,17,15,21,12,12,17,15,17,18,22,22,null,14,22,14,1,11,1,7],[11,3,24,33,7,null,null,null,10,9,25,31,9,null,null,null,null,9,20,14,25,13,23,3,14,15,20,13,10,15,12,18,20,18,18,null,13,20,12,2,3,2,8],[10,null,null,30,8,16,null,null,13,7,null,null,8,16,null,null,null,11,19,13,24,11,22,2,13,14,19,12,9,14,11,17,19,17,7,null,12,19,8,3,2,3,8],[7,7,19,28,8,13,20,null,11,8,19,25,9,14,22,20,null,13,12,12,23,10,21,1,14,13,23,11,4,6,10,16,12,20,20,20,11,18,9,8,0,3,8],[10,8,15,24,8,null,null,null,10,6,13,25,7,null,null,null,null,10,17,11,22,9,20,0,11,12,22,10,7,13,9,15,17,27,27,25,10,17,10,8,5,1,8],[8,8,14,20,6,12,14,null,7,9,15,21,7,13,15,14,null,8,16,10,21,8,19,1,10,11,21,9,6,12,8,14,16,27,27,24,9,16,8,8,2,3,6],[33,23,35,31,39,26,null,39,33,25,37,34,41,25,null,null,35,30,31,25,38,38,32,24,27,24,33,34,21,31,25,24,32,22,22,42,25,34,30,26,40,35,39],[35,27,41,30,42,27,24,41,37,35,26,38,38,34,26,25,40,null,30,28,38,35,35,20,28,29,34,26,21,25,23,21,31,17,17,38,23,38,39,25,39,56,58],[31,null,38,31,37,null,null,39,33,35,null,35,32,38,null,null,35,36,33,25,37,37,31,18,24,29,38,28,20,26,16,21,29,14,14,38,21,35,34,28,45,60,63],[35,24,35,27,37,22,23,null,31,25,36,33,35,24,21,0,0,34,27,23,35,28,31,15,26,23,32,26,22,24,22,23,28,12,12,34,19,37,35,24,37,41,45],[24,25,38,24,25,null,20,null,24,23,35,23,25,null,22,4,null,21,29,26,34,25,33,8,27,26,28,1,16,20,17,22,27,16,16,37,20,34,24,20,32,35,37],[21,16,38,22,26,23,null,null,21,20,40,21,26,26,26,0,1,null,26,20,31,29,null,10,21,23,0,22,17,22,16,22,26,12,12,31,19,27,27,20,29,45,37],[26,15,37,25,21,23,20,null,23,18,38,19,29,23,15,2,2,23,21,20,33,23,23,4,22,19,1,19,16,22,19,24,30,9,9,26,19,29,22,10,31,14,20],[20,17,null,21,23,null,null,null,17,18,null,25,19,null,0,0,5,19,20,18,28,26,22,null,13,19,26,20,16,16,14,24,20,4,4,28,17,20,20,10,16,16,19],[12,13,35,25,19,null,null,null,16,12,33,22,18,6,null,1,1,14,19,16,28,25,18,1,19,18,21,15,16,14,13,23,20,3,3,null,14,19,19,11,10,8,7],[15,16,28,30,8,19,null,null,12,15,24,29,13,20,null,5,0,null,19,15,21,23,26,3,18,16,20,11,12,15,18,18,19,6,6,null,13,22,16,2,10,null,7],[13,7,19,36,7,null,4,2,10,10,21,33,12,4,null,null,0,12,17,14,24,21,27,4,15,17,19,12,12,14,15,18,19,6,6,0,15,24,10,3,2,1,7],[13,10,null,27,12,13,null,null,10,7,null,null,6,14,0,null,null,12,18,15,21,20,18,4,13,13,19,13,11,14,11,15,20,3,3,4,11,19,13,3,6,3,7],[11,6,20,20,6,11,22,0,9,10,19,25,8,12,25,19,0,18,11,9,25,20,21,3,11,12,25,13,4,5,9,14,17,1,1,22,10,16,12,5,null,3,9],[10,10,19,23,10,null,null,null,12,5,14,23,6,null,null,null,3,12,15,10,20,18,16,null,17,13,22,8,1,11,8,13,17,2,2,25,11,18,14,10,3,null,8],[11,7,15,23,4,14,19,null,9,13,15,21,5,13,16,14,1,8,20,10,21,17,15,3,9,11,22,6,6,9,6,14,16,1,1,24,8,16,14,8,2,3,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>id_sg<\/th>\n      <th>sg_crit123<\/th>\n      <th>sg_session_n<\/th>\n      <th>sg_freq_byperson<\/th>\n      <th>sg_bdi_2n<\/th>\n      <th>sg_bdi_1n<\/th>\n      <th>sg_bdi_n<\/th>\n      <th>sg_bdi_n1<\/th>\n      <th>sg_bdi_n2<\/th>\n      <th>sg_bdi_n3<\/th>\n      <th>sg_magnitude<\/th>\n      <th>sg_bdi_tx_change<\/th>\n      <th>sg_change_proportion<\/th>\n      <th>sg_reversal_value<\/th>\n      <th>sg_reversal<\/th>\n      <th>bdi_s0<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>bdi_fu1<\/th>\n      <th>bdi_fu2<\/th>\n      <th>rq_s0<\/th>\n      <th>rq_s1<\/th>\n      <th>rq_s2<\/th>\n      <th>rq_s3<\/th>\n      <th>rq_s4<\/th>\n      <th>rq_s5<\/th>\n      <th>rq_s6<\/th>\n      <th>rq_s7<\/th>\n      <th>rq_s8<\/th>\n      <th>rq_s9<\/th>\n      <th>rq_s10<\/th>\n      <th>rq_s11<\/th>\n      <th>rq_s12<\/th>\n      <th>rq_fu1<\/th>\n      <th>rq_fu2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script><p>Depending on the research question it might be of interest to select
the largest gain, as shown below. Notice that the selected gain for ID 5
is different depending on how multiple gains are handled. The first gain
experienced by ID 5 is from session 3 to 4, whereas the largest gain was
experienced from session 8 to 9.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">byperson_largest</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_byperson.html">create_byperson</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span>
<span>                                    sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                                    id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                                    tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                                    tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                                    sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                                    <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                                    <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                                    sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span>
<span>                                    identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                    multiple_sg_select <span class="op">=</span> <span class="st">"largest"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the third criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; The largest gain/loss was selected in case of multiple gains/losses.</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ff97bc0ad8919473f11c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ff97bc0ad8919473f11c">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43],["1_sg_7",null,"3_sg_8","4_sg_3","5_sg_8",null,null,null,"9_sg_3","10_sg_2",null,"12_sg_3","13_sg_3","14_sg_2",null,null,null,"18_sg_3",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"39_sg_3","40_sg_5","41_sg_6","42_sg_5","43_sg_5"],[1,0,1,1,1,0,0,0,1,1,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1],[7,null,8,3,8,null,null,null,3,2,null,3,3,2,null,null,null,3,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,3,5,6,5,5],[2,0,1,1,2,0,0,0,1,2,0,1,2,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2,2,2],[24,null,37,31,23,null,null,null,35,null,null,38,34,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,35,23,30,40,45],[21,null,null,30,21,null,null,null,34,35,null,38,33,39,null,null,null,38,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,34,22,29,38,37],[29,null,35,32,19,null,null,null,32,35,null,31,36,37,null,null,null,35,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,33,21,26,39,35],[17,null,26,22,6,null,null,null,23,25,null,23,23,23,null,null,null,24,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,24,10,15,15,21],[11,null,24,22,7,null,null,null,24,25,null,21,25,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,25,12,12,13,19],[11,null,null,20,8,null,null,null,22,17,null,22,23,23,null,null,null,22,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,22,11,11,10,5],[12,null,9,10,13,null,null,null,9,10,null,8,13,14,null,null,null,11,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,9,11,11,24,14],[28,null,16,3,31,null,null,null,24,27,null,13,25,25,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,26,22,40,47,41],[0.428571428571429,null,0.5625,3.33333333333333,0.419354838709677,null,null,null,0.375,0.37037037037037,null,0.615384615384615,0.52,0.56,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0.346153846153846,0.5,0.275,0.51063829787234,0.341463414634146],[23,null,30.5,27,12.5,null,null,null,27.5,30,null,27,29.5,30,null,null,null,29.5,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,28.5,15.5,20.5,27,28],[0,null,0,1,0,null,null,null,0,0,null,1,0,0,null,null,null,0,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,0,0,0,0,0],[33,26,40,33,39,35,null,40,33,34,30,32,34,37,25,null,40,33,33,27,37,38,34,31,30,27,36,29,25,30,37,35,32,31,36,43,37,39,37,35,36,55,56],[35,26,35,31,39,37,37,41,35,35,40,38,34,39,28,25,41,null,32,35,37,35,35,30,29,26,35,33,24,25,42,40,30,28,36,40,31,37,35,30,40,50,49],[37,null,38,30,37,null,null,37,34,35,null,38,33,37,19,null,37,38,30,24,36,20,33,25,27,26,34,27,23,26,36,34,28,22,19,39,26,35,34,31,41,45,47],[34,26,35,32,36,23,23,null,32,25,36,31,36,23,23,null,null,35,29,24,33,19,33,20,25,24,33,23,21,24,30,34,27,17,13,36,22,33,33,23,39,40,45],[23,null,37,22,26,null,21,null,23,25,37,23,23,null,12,null,null,24,28,22,33,21,32,15,25,24,29,null,21,24,26,30,27,12,11,34,17,32,24,22,30,38,37],[24,27,36,22,26,23,null,null,24,17,36,21,25,23,13,null,null,null,26,22,31,24,null,10,21,23,null,22,19,21,20,24,25,13,12,32,19,29,25,21,29,39,35],[21,17,37,20,23,21,21,null,22,17,37,22,23,21,null,null,null,22,23,21,29,25,25,5,22,20,null,19,16,19,14,24,24,11,11,28,18,27,22,10,26,15,21],[29,19,null,21,21,null,null,null,21,16,null,24,19,null,13,null,null,17,19,18,27,20,21,3,18,19,26,18,13,18,12,21,22,8,4,28,17,24,20,12,15,13,19],[17,11,35,19,19,null,null,null,17,16,34,25,18,null,null,null,null,16,21,16,27,16,21,1,19,16,23,14,14,17,13,18,20,20,22,null,14,22,16,11,12,10,5],[11,10,26,24,6,19,null,null,14,11,26,30,10,21,null,null,null,null,20,16,25,16,22,2,17,15,21,12,12,17,15,17,18,22,22,null,14,22,14,1,11,1,7],[11,3,24,33,7,null,null,null,10,9,25,31,9,null,null,null,null,9,20,14,25,13,23,3,14,15,20,13,10,15,12,18,20,18,18,null,13,20,12,2,3,2,8],[10,null,null,30,8,16,null,null,13,7,null,null,8,16,null,null,null,11,19,13,24,11,22,2,13,14,19,12,9,14,11,17,19,17,7,null,12,19,8,3,2,3,8],[7,7,19,28,8,13,20,null,11,8,19,25,9,14,22,20,null,13,12,12,23,10,21,1,14,13,23,11,4,6,10,16,12,20,20,20,11,18,9,8,0,3,8],[10,8,15,24,8,null,null,null,10,6,13,25,7,null,null,null,null,10,17,11,22,9,20,0,11,12,22,10,7,13,9,15,17,27,27,25,10,17,10,8,5,1,8],[8,8,14,20,6,12,14,null,7,9,15,21,7,13,15,14,null,8,16,10,21,8,19,1,10,11,21,9,6,12,8,14,16,27,27,24,9,16,8,8,2,3,6],[33,23,35,31,39,26,null,39,33,25,37,34,41,25,null,null,35,30,31,25,38,38,32,24,27,24,33,34,21,31,25,24,32,22,22,42,25,34,30,26,40,35,39],[35,27,41,30,42,27,24,41,37,35,26,38,38,34,26,25,40,null,30,28,38,35,35,20,28,29,34,26,21,25,23,21,31,17,17,38,23,38,39,25,39,56,58],[31,null,38,31,37,null,null,39,33,35,null,35,32,38,null,null,35,36,33,25,37,37,31,18,24,29,38,28,20,26,16,21,29,14,14,38,21,35,34,28,45,60,63],[35,24,35,27,37,22,23,null,31,25,36,33,35,24,21,0,0,34,27,23,35,28,31,15,26,23,32,26,22,24,22,23,28,12,12,34,19,37,35,24,37,41,45],[24,25,38,24,25,null,20,null,24,23,35,23,25,null,22,4,null,21,29,26,34,25,33,8,27,26,28,1,16,20,17,22,27,16,16,37,20,34,24,20,32,35,37],[21,16,38,22,26,23,null,null,21,20,40,21,26,26,26,0,1,null,26,20,31,29,null,10,21,23,0,22,17,22,16,22,26,12,12,31,19,27,27,20,29,45,37],[26,15,37,25,21,23,20,null,23,18,38,19,29,23,15,2,2,23,21,20,33,23,23,4,22,19,1,19,16,22,19,24,30,9,9,26,19,29,22,10,31,14,20],[20,17,null,21,23,null,null,null,17,18,null,25,19,null,0,0,5,19,20,18,28,26,22,null,13,19,26,20,16,16,14,24,20,4,4,28,17,20,20,10,16,16,19],[12,13,35,25,19,null,null,null,16,12,33,22,18,6,null,1,1,14,19,16,28,25,18,1,19,18,21,15,16,14,13,23,20,3,3,null,14,19,19,11,10,8,7],[15,16,28,30,8,19,null,null,12,15,24,29,13,20,null,5,0,null,19,15,21,23,26,3,18,16,20,11,12,15,18,18,19,6,6,null,13,22,16,2,10,null,7],[13,7,19,36,7,null,4,2,10,10,21,33,12,4,null,null,0,12,17,14,24,21,27,4,15,17,19,12,12,14,15,18,19,6,6,0,15,24,10,3,2,1,7],[13,10,null,27,12,13,null,null,10,7,null,null,6,14,0,null,null,12,18,15,21,20,18,4,13,13,19,13,11,14,11,15,20,3,3,4,11,19,13,3,6,3,7],[11,6,20,20,6,11,22,0,9,10,19,25,8,12,25,19,0,18,11,9,25,20,21,3,11,12,25,13,4,5,9,14,17,1,1,22,10,16,12,5,null,3,9],[10,10,19,23,10,null,null,null,12,5,14,23,6,null,null,null,3,12,15,10,20,18,16,null,17,13,22,8,1,11,8,13,17,2,2,25,11,18,14,10,3,null,8],[11,7,15,23,4,14,19,null,9,13,15,21,5,13,16,14,1,8,20,10,21,17,15,3,9,11,22,6,6,9,6,14,16,1,1,24,8,16,14,8,2,3,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>id_sg<\/th>\n      <th>sg_crit123<\/th>\n      <th>sg_session_n<\/th>\n      <th>sg_freq_byperson<\/th>\n      <th>sg_bdi_2n<\/th>\n      <th>sg_bdi_1n<\/th>\n      <th>sg_bdi_n<\/th>\n      <th>sg_bdi_n1<\/th>\n      <th>sg_bdi_n2<\/th>\n      <th>sg_bdi_n3<\/th>\n      <th>sg_magnitude<\/th>\n      <th>sg_bdi_tx_change<\/th>\n      <th>sg_change_proportion<\/th>\n      <th>sg_reversal_value<\/th>\n      <th>sg_reversal<\/th>\n      <th>bdi_s0<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>bdi_fu1<\/th>\n      <th>bdi_fu2<\/th>\n      <th>rq_s0<\/th>\n      <th>rq_s1<\/th>\n      <th>rq_s2<\/th>\n      <th>rq_s3<\/th>\n      <th>rq_s4<\/th>\n      <th>rq_s5<\/th>\n      <th>rq_s6<\/th>\n      <th>rq_s7<\/th>\n      <th>rq_s8<\/th>\n      <th>rq_s9<\/th>\n      <th>rq_s10<\/th>\n      <th>rq_s11<\/th>\n      <th>rq_s12<\/th>\n      <th>rq_fu1<\/th>\n      <th>rq_fu2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level2">
<h2 id="extract-values-around-sudden-gains">Extract values around sudden gains<a class="anchor" aria-label="anchor" href="#extract-values-around-sudden-gains"></a>
</h2>
<p>The package can extract scores on secondary outcome or process
measures around the period of each gain. This function can be applied to
either the bysg or byperson dataset. Note that the variables specified
in <code>extract_var_list</code> must be in the data set specified in
<code>data</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For bysg dataset select "id" and "rq" variables first</span></span>
<span><span class="va">sgdata_rq</span> <span class="op">&lt;-</span> <span class="va">sgdata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">rq_s0</span><span class="op">:</span><span class="va">rq_s12</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Join them with the sudden gains data set, here "bysg"</span></span>
<span><span class="va">bysg_rq</span> <span class="op">&lt;-</span> <span class="va">bysg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">sgdata_rq</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract "rq" scores around sudden gains on "bdi" in the bysg dataset</span></span>
<span><span class="va">bysg_rq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_values.html">extract_values</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg_rq</span>,</span>
<span>                          id_var_name <span class="op">=</span> <span class="st">"id_sg"</span>,</span>
<span>                          extract_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rq_s1"</span>, <span class="st">"rq_s2"</span>, <span class="st">"rq_s3"</span>, <span class="st">"rq_s4"</span>, </span>
<span>                                               <span class="st">"rq_s5"</span>, <span class="st">"rq_s6"</span>, <span class="st">"rq_s7"</span>, <span class="st">"rq_s8"</span>, </span>
<span>                                               <span class="st">"rq_s9"</span>, <span class="st">"rq_s10"</span>, <span class="st">"rq_s11"</span>, <span class="st">"rq_s12"</span><span class="op">)</span>,</span>
<span>                          extract_measure_name <span class="op">=</span> <span class="st">"rq"</span>,</span>
<span>                          add_to_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Note: The measure specified in 'extract_var_list' must have the same number of repeated time points as the measure used to identify sudden gains.</span></span></code></pre></div>
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-d902338caa5d28c8ad34" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d902338caa5d28c8ad34">{"x":{"filter":"none","vertical":false,"extensions":["FixedColumns"],"data":[[1,1,3,4,5,5,9,10,10,12,13,13,14,18,39,40,40,40,41,41,42,42,43,43],["1_sg_3","1_sg_7","3_sg_8","4_sg_3","5_sg_3","5_sg_8","9_sg_3","10_sg_2","10_sg_4","12_sg_3","13_sg_3","13_sg_8","14_sg_2","18_sg_3","39_sg_3","40_sg_2","40_sg_5","40_sg_8","41_sg_6","41_sg_9","42_sg_5","42_sg_8","43_sg_5","43_sg_7"],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[3,7,8,3,3,8,3,2,4,3,3,8,2,3,3,2,5,8,6,9,5,8,5,7],[2,2,1,1,2,2,1,2,2,1,2,2,1,1,1,3,3,3,2,2,2,2,2,2],[35,35,35,31,39,39,35,35,35,38,34,34,39,null,35,30,30,30,40,40,50,50,49,49],[37,37,38,30,37,37,34,35,35,38,33,33,37,38,34,31,31,31,41,41,45,45,47,47],[34,34,35,32,36,36,32,25,25,31,36,36,23,35,33,23,23,23,39,39,40,40,45,45],[23,23,37,22,26,26,23,25,25,23,23,23,null,24,24,22,22,22,30,30,38,38,37,37],[24,24,36,22,26,26,24,17,17,21,25,25,23,null,25,21,21,21,29,29,39,39,35,35],[21,21,37,20,23,23,22,17,17,22,23,23,21,22,22,10,10,10,26,26,15,15,21,21],[29,29,null,21,21,21,21,16,16,24,19,19,null,17,20,12,12,12,15,15,13,13,19,19],[17,17,35,19,19,19,17,16,16,25,18,18,null,16,16,11,11,11,12,12,10,10,5,5],[11,11,26,24,6,6,14,11,11,30,10,10,21,null,14,1,1,1,11,11,1,1,7,7],[11,11,24,33,7,7,10,9,9,31,9,9,null,9,12,2,2,2,3,3,2,2,8,8],[10,10,null,30,8,8,13,7,7,null,8,8,16,11,8,3,3,3,2,2,3,3,8,8],[7,7,19,28,8,8,11,8,8,25,9,9,14,13,9,8,8,8,0,0,3,3,8,8],[35,24,37,31,39,23,35,null,35,38,34,23,null,null,35,null,23,10,30,15,40,15,45,35],[37,21,null,30,37,21,34,35,25,38,33,19,39,38,34,30,22,12,29,12,38,13,37,21],[34,29,35,32,36,19,32,35,25,31,36,18,37,35,33,31,21,11,26,11,39,10,35,19],[23,17,26,22,26,6,23,25,17,23,23,10,23,24,24,23,10,1,15,3,15,1,21,5],[24,11,24,22,26,7,24,25,17,21,25,9,null,null,25,22,12,2,12,2,13,2,19,7],[21,11,null,20,23,8,22,17,16,22,23,8,23,22,22,21,11,3,11,0,10,3,5,8],[11,12,9,10,10,13,9,10,8,8,13,8,14,11,9,8,11,10,11,8,24,9,14,14],[28,28,16,3,31,31,24,27,27,13,25,25,25,null,26,22,22,22,40,40,47,47,41,41],[0.392857142857143,0.428571428571429,0.5625,3.33333333333333,0.32258064516129,0.419354838709677,0.375,0.37037037037037,0.296296296296296,0.615384615384615,0.52,0.32,0.56,null,0.346153846153846,0.363636363636364,0.5,0.454545454545455,0.275,0.2,0.51063829787234,0.191489361702128,0.341463414634146,0.341463414634146],[28.5,23,30.5,27,31,12.5,27.5,30,21,27,29.5,14,30,29.5,28.5,27,15.5,6,20.5,7,27,5.5,28,12],[1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[33,33,35,31,39,39,33,25,25,34,41,41,25,30,30,26,26,26,40,40,35,35,39,39],[35,35,41,30,42,42,37,35,35,38,38,38,34,null,39,25,25,25,39,39,56,56,58,58],[31,31,38,31,37,37,33,35,35,35,32,32,38,36,34,28,28,28,45,45,60,60,63,63],[35,35,35,27,37,37,31,25,25,33,35,35,24,34,35,24,24,24,37,37,41,41,45,45],[24,24,38,24,25,25,24,23,23,23,25,25,null,21,24,20,20,20,32,32,35,35,37,37],[21,21,38,22,26,26,21,20,20,21,26,26,26,null,27,20,20,20,29,29,45,45,37,37],[26,26,37,25,21,21,23,18,18,19,29,29,23,23,22,10,10,10,31,31,14,14,20,20],[20,20,null,21,23,23,17,18,18,25,19,19,null,19,20,10,10,10,16,16,16,16,19,19],[12,12,35,25,19,19,16,12,12,22,18,18,6,14,19,11,11,11,10,10,8,8,7,7],[15,15,28,30,8,8,12,15,15,29,13,13,20,null,16,2,2,2,10,10,null,null,7,7],[13,13,19,36,7,7,10,10,10,33,12,12,4,12,10,3,3,3,2,2,1,1,7,7],[13,13,null,27,12,12,10,7,7,null,6,6,14,12,13,3,3,3,6,6,3,3,7,7],[11,11,20,20,6,6,9,10,10,25,8,8,12,18,12,5,5,5,null,null,3,3,9,9],[35,21,37,30,42,21,37,null,35,38,38,29,null,null,39,null,24,10,32,16,41,14,45,37],[31,26,null,31,37,23,33,35,25,35,32,19,34,36,34,25,20,10,29,10,35,16,37,20],[35,20,35,27,37,19,31,35,23,33,35,18,38,34,35,28,20,11,31,10,45,8,37,19],[24,12,28,24,25,8,24,25,20,23,25,13,24,21,24,24,10,2,16,2,14,null,20,7],[21,15,19,22,26,7,21,23,18,21,26,12,null,null,27,20,10,3,10,6,16,1,19,7],[26,13,null,25,21,12,23,20,18,19,29,6,26,23,22,20,11,3,10,null,8,3,7,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>id<\/th>\n      <th>id_sg<\/th>\n      <th>sg_crit123<\/th>\n      <th>sg_session_n<\/th>\n      <th>sg_freq_byperson<\/th>\n      <th>bdi_s1<\/th>\n      <th>bdi_s2<\/th>\n      <th>bdi_s3<\/th>\n      <th>bdi_s4<\/th>\n      <th>bdi_s5<\/th>\n      <th>bdi_s6<\/th>\n      <th>bdi_s7<\/th>\n      <th>bdi_s8<\/th>\n      <th>bdi_s9<\/th>\n      <th>bdi_s10<\/th>\n      <th>bdi_s11<\/th>\n      <th>bdi_s12<\/th>\n      <th>sg_bdi_2n<\/th>\n      <th>sg_bdi_1n<\/th>\n      <th>sg_bdi_n<\/th>\n      <th>sg_bdi_n1<\/th>\n      <th>sg_bdi_n2<\/th>\n      <th>sg_bdi_n3<\/th>\n      <th>sg_magnitude<\/th>\n      <th>sg_bdi_tx_change<\/th>\n      <th>sg_change_proportion<\/th>\n      <th>sg_reversal_value<\/th>\n      <th>sg_reversal<\/th>\n      <th>rq_s0<\/th>\n      <th>rq_s1<\/th>\n      <th>rq_s2<\/th>\n      <th>rq_s3<\/th>\n      <th>rq_s4<\/th>\n      <th>rq_s5<\/th>\n      <th>rq_s6<\/th>\n      <th>rq_s7<\/th>\n      <th>rq_s8<\/th>\n      <th>rq_s9<\/th>\n      <th>rq_s10<\/th>\n      <th>rq_s11<\/th>\n      <th>rq_s12<\/th>\n      <th>sg_rq_2n<\/th>\n      <th>sg_rq_1n<\/th>\n      <th>sg_rq_n<\/th>\n      <th>sg_rq_n1<\/th>\n      <th>sg_rq_n2<\/th>\n      <th>sg_rq_n3<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"scrollX":true,"fixedColumns":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="plots-of-average-change-around-sudden-gains">Plots of average change around sudden gains<a class="anchor" aria-label="anchor" href="#plots-of-average-change-around-sudden-gains"></a>
</h2>
<p>These plots are created using the <em>ggplot2</em> R-package <span class="citation">(<a href="#ref-R-ggplot2">Wickham 2016</a>)</span> in
five main steps:</p>
<ol style="list-style-type: decimal">
<li>Means for all time points and points</li>
<li>95% confidence intervals for all time points</li>
<li>Dotted line between the first two values</li>
<li>Straight line between all 5 values around the gain</li>
<li>Dotted line between the last two values</li>
</ol>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create plot of average change in depression symptoms (BDI) around the gain</span></span>
<span><span class="va">plot_sg_bdi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_sg.html">plot_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg</span>,</span>
<span>                       id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                       tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                       tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                       sg_pre_post_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg_bdi_2n"</span>, <span class="st">"sg_bdi_1n"</span>, <span class="st">"sg_bdi_n"</span>,</span>
<span>                                                <span class="st">"sg_bdi_n1"</span>, <span class="st">"sg_bdi_n2"</span>, <span class="st">"sg_bdi_n3"</span><span class="op">)</span>,</span>
<span>                       ylab <span class="op">=</span> <span class="st">"BDI"</span>, xlab <span class="op">=</span> <span class="st">"Session"</span>,</span>
<span>                       colour_single <span class="op">=</span> <span class="st">"#239b89ff"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create plot of average change in rumination (RQ) around depression sudden gains</span></span>
<span><span class="va">plot_sg_rq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_sg.html">plot_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg_rq</span>,</span>
<span>                      id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                      tx_start_var_name <span class="op">=</span> <span class="st">"rq_s1"</span>,</span>
<span>                      tx_end_var_name <span class="op">=</span> <span class="st">"rq_s12"</span>,</span>
<span>                      sg_pre_post_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg_rq_2n"</span>, <span class="st">"sg_rq_1n"</span>, <span class="st">"sg_rq_n"</span>,</span>
<span>                                               <span class="st">"sg_rq_n1"</span>, <span class="st">"sg_rq_n2"</span>, <span class="st">"sg_rq_n3"</span><span class="op">)</span>,</span>
<span>                      ylab <span class="op">=</span> <span class="st">"RQ"</span>, xlab <span class="op">=</span> <span class="st">"Session"</span>,</span>
<span>                      colour_single <span class="op">=</span> <span class="st">"#440154FF"</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># It is then possible to apply other ggplot2 functions to the plot if desired,</span></span>
<span><span class="co"># e.g. y axis scale, or x axis labels ...</span></span>
<span></span>
<span><span class="va">plot_sg_bdi</span> <span class="op">&lt;-</span> <span class="va">plot_sg_bdi</span> <span class="op">+</span> </span>
<span>               <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_sg_rq</span> <span class="op">&lt;-</span> <span class="va">plot_sg_rq</span> <span class="op">+</span> </span>
<span>              <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"First"</span>, <span class="st">"n-2"</span>, <span class="st">"n-1"</span>, <span class="st">"n"</span>,</span>
<span>                                                   <span class="st">"n+1"</span>, <span class="st">"n+2"</span>, <span class="st">"n+3"</span>, <span class="st">"Last"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Scale for <span style="color: #00BB00;">x</span> is already present.</span></span>
<span><span class="co">#&gt; Adding another scale for <span style="color: #00BB00;">x</span>, which will replace the existing scale.</span></span></code></pre></div>
<p>Each plot will automatically return a warning message about how many
missing values were present for each of the five components mentioned
above. The warning messages from the BDI plot can be interpreted as
follows:</p>
<ol style="list-style-type: decimal">
<li>
<em>Means for all time points and points</em>: There are <strong>12
missing values</strong> overall</li>
<li>
<em>95% confidence intervals for all time points:</em> There are
<strong>12 missing values</strong> overall</li>
<li>
<em>Dotted line between the first two values:</em> There are
<strong>8 missing values</strong> at session
<code>tx_start_var_name</code> and the <em>first</em> variable specified
in <code>sg_pre_post_var_list</code> together</li>
<li>
<em>Straight line between all 5 values around the gain:</em> There
are <strong>11 missing values</strong> together in all variables
specified in <code>sg_pre_post_var_list</code>
</li>
<li>
<em>Dotted line between the last two values:</em> There is <strong>1
missing values</strong> at session <code>tx_end_var_name</code> and the
<em>last</em> variable specified in
<code>sg_pre_post_var_list</code>
</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_sg_bdi</span></span>
<span><span class="co">#&gt; Warning: Removed 27 rows containing non-finite values (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Removed 27 rows containing non-finite values (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 14 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 8 rows containing non-finite values (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 10 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="va">plot_sg_rq</span> </span>
<span><span class="co">#&gt; Warning: Removed 30 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 30 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 14 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 10 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 12 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-21-1.png" width="307.2"><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-21-2.png" width="307.2"></p>
<div class="section level3">
<h3 id="plot-average-gain-for-multiple-groups">Plot average gain for multiple groups<a class="anchor" aria-label="anchor" href="#plot-average-gain-for-multiple-groups"></a>
</h3>
<p>To illustrate this functionality we create a data frame with a
grouping variable. The code below duplicates the data frame
<code>sgdata</code> and adds a variable assigning each case to one of
two groups.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set seed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Duplicate data</span></span>
<span><span class="va">sgdata_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">sgdata</span>, <span class="va">sgdata</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Overwrite id variable</span></span>
<span><span class="va">sgdata_group</span><span class="op">$</span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">86</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add random group variable</span></span>
<span><span class="va">sgdata_group</span><span class="op">$</span><span class="va">group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">2</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">86</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create byperson data set</span></span>
<span><span class="va">byperson_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_byperson.html">create_byperson</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata_group</span>,</span>
<span>                                  sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                                  id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                                  tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                                  tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                                  sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>,</span>
<span>                                                  <span class="st">"bdi_s4"</span>, <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>,</span>
<span>                                                  <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, <span class="st">"bdi_s9"</span>,</span>
<span>                                                  <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                                  sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span>
<span>                                  multiple_sg_select <span class="op">=</span> <span class="st">"first"</span><span class="op">)</span></span>
<span><span class="co">#&gt; First, second, and third sudden gains criteria were applied.</span></span>
<span><span class="co">#&gt; The critical value for the third criterion was adjusted for missingness.</span></span>
<span><span class="co">#&gt; The first gain/loss was selected in case of multiple gains/losses.</span></span>
<span></span>
<span><span class="va">byperson_group_select</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/select_cases.html">select_cases</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">byperson_group</span>,</span>
<span>                              id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                              sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                              <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                             <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                              method <span class="op">=</span> <span class="st">"pattern"</span>,</span>
<span>                              return_id_lgl <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>                 <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sg_select</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; The method 'pattern' was used to select cases.</span></span>
<span><span class="co">#&gt; See help('select_cases') for more information.</span></span></code></pre></div>
<p>The data frame <code>sgdata_group</code> can now be used to
illustrate the plotting function for different groups. This function
works identically to the plot function for a single group. Further
arguments are used to specify the colours to be used for the different
groups.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_byperson_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_sg.html">plot_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">byperson_group_select</span>,</span>
<span>                               id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                               tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span>
<span>                               tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span>
<span>                               sg_pre_post_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg_bdi_2n"</span>, <span class="st">"sg_bdi_1n"</span>, <span class="st">"sg_bdi_n"</span>,</span>
<span>                                                        <span class="st">"sg_bdi_n1"</span>, <span class="st">"sg_bdi_n2"</span>, <span class="st">"sg_bdi_n3"</span><span class="op">)</span>,</span>
<span>                               group_var_name <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>                               group_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>                               group_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Treatment A"</span>, <span class="st">"Treatment B"</span><span class="op">)</span>,</span>
<span>                               group_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>                               colour_group <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>                               viridis_option <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>                               viridis_begin <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                               viridis_end <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                               apaish <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                               ylab <span class="op">=</span> <span class="st">"BDI"</span>, xlab <span class="op">=</span> <span class="st">"Session"</span><span class="op">)</span></span></code></pre></div>
<p>The plot below shows the average gain for each group.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_byperson_group</span></span>
<span><span class="co">#&gt; Warning: Removed 402 rows containing non-finite values (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Removed 402 rows containing non-finite values (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 106 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 304 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 98 rows containing non-finite values</span></span>
<span><span class="co">#&gt; (`stat_summary()`).</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-24-1.png" width="422.4"></p>
</div>
<div class="section level3">
<h3 id="plot-individual-trajectories">Plot individual trajectories<a class="anchor" aria-label="anchor" href="#plot-individual-trajectories"></a>
</h3>
<p>The function <code><a href="../reference/plot_sg_trajectories.html">plot_sg_trajectories()</a></code> can plot individual
trajectories of the cases in the data set. It is possible to select
specific IDs for plotting using the <code>select_id_list</code>
argument, or a number of random IDs using the <code>sample_n</code>
argument. Below, case IDs 2, 4, 5 and 9 are selected.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_trajectories_1</span> <span class="op">&lt;-</span> <span class="va">sgdata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="../reference/plot_sg_trajectories.html">plot_sg_trajectories</a></span><span class="op">(</span>id_var <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                         select_id_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>, <span class="st">"9"</span><span class="op">)</span>,</span>
<span>                         var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                      <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                      <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                         show_id <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         id_label_size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                         label.padding <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                         show_legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         colour <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>                         viridis_option <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                         viridis_begin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                         viridis_end <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                         connect_missing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         scale_x_num <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         scale_x_num_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         apaish <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         xlab <span class="op">=</span> <span class="st">"Session"</span>, </span>
<span>                         ylab <span class="op">=</span> <span class="st">"BDI"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot_trajectories_1</span></span>
<span><span class="co">#&gt; Warning: Removed 3 rows containing missing values (`geom_point()`).</span></span>
<span><span class="co">#&gt; Warning: Removed 3 rows containing missing values</span></span>
<span><span class="co">#&gt; (`geom_label_repel()`).</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-26-1.png" width="528"></p>
<p>This function can also be combined with a filter function to explore
specific groups of sudden gains cases, for example (1) all cases with a
sudden gain at session 3, or (2) three randomly selected
(<code>select_n = 3</code>) cases who experienced more than one sudden
gain (<code>dplyr::filter(sg_freq_byperson &gt; 1</code>).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Create plot including all cases with a sudden gain at session 3</span></span>
<span><span class="va">plot_trajectories_2</span> <span class="op">&lt;-</span> <span class="va">bysg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sg_session_n</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/plot_sg_trajectories.html">plot_sg_trajectories</a></span><span class="op">(</span>id_var <span class="op">=</span> <span class="st">"id_sg"</span>,</span>
<span>                         var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                      <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                      <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                         show_id <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         id_label_size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                         label.padding <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                         show_legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         colour <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>                         viridis_option <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                         viridis_begin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                         viridis_end <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                         connect_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         scale_x_num <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         scale_x_num_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         apaish <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         xlab <span class="op">=</span> <span class="st">"Session"</span>, </span>
<span>                         ylab <span class="op">=</span> <span class="st">"BDI"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Show all cases with a sudden gain at session 3</span></span>
<span><span class="va">plot_trajectories_2</span></span>
<span><span class="co">#&gt; Warning: Removed 4 rows containing missing values (`geom_point()`).</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-28-1.png" width="624"></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 2. Create plot including 3 randomly selected (select_n = 3) cases who experienced </span></span>
<span><span class="co">#    more than 1 gain (dplyr::filter(sg_freq_byperson &gt; 1))</span></span>
<span><span class="va">plot_trajectories_3</span> <span class="op">&lt;-</span> <span class="va">byperson_first</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">sg_freq_byperson</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="../reference/plot_sg_trajectories.html">plot_sg_trajectories</a></span><span class="op">(</span>id_var <span class="op">=</span> <span class="st">"id_sg"</span>,</span>
<span>                         var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>, </span>
<span>                                      <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, </span>
<span>                                      <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                         select_n <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                         show_id <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                         id_label_size <span class="op">=</span> <span class="fl">4</span>,</span>
<span>                         label.padding <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>                         show_legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         colour <span class="op">=</span> <span class="st">"viridis"</span>,</span>
<span>                         viridis_option <span class="op">=</span> <span class="st">"D"</span>,</span>
<span>                         viridis_begin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                         viridis_end <span class="op">=</span> <span class="fl">0.8</span>,</span>
<span>                         connect_missing <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         scale_x_num <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         scale_x_num_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                         apaish <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                         xlab <span class="op">=</span> <span class="st">"Session"</span>, </span>
<span>                         ylab <span class="op">=</span> <span class="st">"BDI"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 2. Show 3 cases (select_n = 3) with more than 1 gain (dplyr::filter(sg_freq_byperson &gt; 1))</span></span>
<span><span class="va">plot_trajectories_3</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-30-1.png" width="624"></p>
</div>
</div>
<div class="section level2">
<h2 id="summarise-descriptive-statistics">Summarise descriptive statistics<a class="anchor" aria-label="anchor" href="#summarise-descriptive-statistics"></a>
</h2>
<div class="section level3">
<h3 id="count-between-session-intervals">Count between-session intervals<a class="anchor" aria-label="anchor" href="#count-between-session-intervals"></a>
</h3>
<p>The <code>count_intervals</code> function provides a summary of how
many between-session intervals were and were not analysed for sudden
gains. For more information see the help file for this function,
<code><a href="../reference/count_intervals.html">help(count_intervals)</a></code>. Here we see code to count only the
intervals of the data that was selected for the sudden gains study in
the above code using <code>sgdata_select</code>.</p>
<ul>
<li>
<code>total_between_sess_intervals</code>: The total number of
between-session intervals present in the data set, here:
<code>sgdata_select</code>.</li>
<li>
<code>total_between_sess_intervals_sg</code>: The total number of
gain intervals (i.e. sudden gains) present in the data set. By default
the first-to-second and penultimate-to-last intervals are not included
here. If <code>identify_sg_1to2</code> is set to <code>TRUE</code> the
first-to-second intervals will be included.</li>
<li>
<code>available_between_sess_intervals_sg</code>: The total number
of between-session intervals that could feasibly be analysed for sudden
gains.</li>
<li>
<code>not_available_between_sess_intervals_sg</code>: The total
number of between-session intervals that could not be analysed for
sudden gains (due to missing data).</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/count_intervals.html">count_intervals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata_select</span>,</span>
<span>                id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>,</span>
<span>                                <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>,</span>
<span>                                <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span>
<span>                identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt; $total_between_sess_intervals</span></span>
<span><span class="co">#&gt; [1] 429</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $total_between_sess_intervals_sg</span></span>
<span><span class="co">#&gt; [1] 351</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $available_between_sess_intervals_sg</span></span>
<span><span class="co">#&gt; [1] 298</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $not_available_between_sess_intervals_sg</span></span>
<span><span class="co">#&gt; [1] 53</span></span></code></pre></div>
<p>The <code><a href="../reference/plot_sg_intervals.html">plot_sg_intervals()</a></code> can be used to visualise the
available data for each time point as well as the percentage of session
to session intervals that are analysed for potential sudden gains.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_sg_intervals.html">plot_sg_intervals</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata_select</span>,</span>
<span>                  id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>                  sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>,</span>
<span>                                  <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>,</span>
<span>                                  <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="suddengains-tutorial_files/figure-html/unnamed-chunk-32-1.png" width="624"></p>
</div>
<div class="section level3">
<h3 id="descriptive-statistics-of-sudden-gains">Descriptive statistics of sudden gains<a class="anchor" aria-label="anchor" href="#descriptive-statistics-of-sudden-gains"></a>
</h3>
<p>The <code><a href="../reference/describe_sg.html">describe_sg()</a></code> function provides descriptive
statistics about the sudden gains based on the variables from the
<code>bysg</code> or <code>byperson</code> datasets. The descriptives
(e.g. “sg_pct”, the percentage of cases with sudden gains in the
specified data set) are always in relation to the input data and
therefore will vary depending on whether the structure of the data set
is <code>bysg</code> or <code>byperson</code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Describe bysg dataset ----</span></span>
<span><span class="fu"><a href="../reference/describe_sg.html">describe_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg</span>, </span>
<span>            sg_data_structure <span class="op">=</span> <span class="st">"bysg"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $total_n</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_total_n</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_pct</span></span>
<span><span class="co">#&gt; [1] 100</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_multiple_pct</span></span>
<span><span class="co">#&gt; [1] 70.83</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_reversal_n</span></span>
<span><span class="co">#&gt; [1] 4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_reversal_pct</span></span>
<span><span class="co">#&gt; [1] 16.67</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_magnitude_m</span></span>
<span><span class="co">#&gt; [1] 11</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_magnitude_sd</span></span>
<span><span class="co">#&gt; [1] 3.43</span></span>
<span></span>
<span><span class="co"># Describe byperson dataset ----</span></span>
<span><span class="fu"><a href="../reference/describe_sg.html">describe_sg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">byperson_first</span>, </span>
<span>            sg_data_structure <span class="op">=</span> <span class="st">"byperson"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $total_n</span></span>
<span><span class="co">#&gt; [1] 43</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_total_n</span></span>
<span><span class="co">#&gt; [1] 24</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_n</span></span>
<span><span class="co">#&gt; [1] 15</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_pct</span></span>
<span><span class="co">#&gt; [1] 34.88</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_multiple_n</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_multiple_pct</span></span>
<span><span class="co">#&gt; [1] 18.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_reversal_n</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_reversal_pct</span></span>
<span><span class="co">#&gt; [1] 20</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_magnitude_m</span></span>
<span><span class="co">#&gt; [1] 11.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sg_magnitude_sd</span></span>
<span><span class="co">#&gt; [1] 3.98</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Jacobson1991" class="csl-entry">
Jacobson, Neil S, and Paula A Truax. 1991. <span>“Clinical Significance:
<span>A</span> Statistical Approach to Defining Meaningful Change in
Psychotherapy Research.”</span> <em>Journal of Consulting and Clinical
Psychology</em> 59 (1): 12–19. <a href="https://doi.org/10.1037/0022-006X.59.1.12" class="external-link">https://doi.org/10.1037/0022-006X.59.1.12</a>.
</div>
<div id="ref-Tang1999" class="csl-entry">
Tang, Tony Z, and Robert J DeRubeis. 1999. <span>“Sudden Gains and
Critical Sessions in Cognitive-Behavioral Therapy for
Depression.”</span> <em>Journal of Consulting and Clinical
Psychology</em> 67 (6): 894–904. <a href="https://doi.org/10.1037/0022-006X.67.6.894" class="external-link">https://doi.org/10.1037/0022-006X.67.6.894</a>.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, Hadley. 2016. <em><span class="nocase">ggplot2</span>:
<span>Elegant</span> <span>Graphics</span> for <span>Data</span>
<span>Analysis</span></em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org" class="external-link">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-R-suddengains" class="csl-entry">
Wiedemann, Milan, Graham R Thew, Richard Stott, and Anke Ehlers. 2020.
<span>“<span class="nocase">suddengains</span>: <span>An</span>
<span>R</span> Package to Identify Sudden Gains in Longitudinal
Data.”</span> <em>PLOS ONE</em>. <a href="https://doi.org/10.1371/journal.pone.0230276" class="external-link">https://doi.org/10.1371/journal.pone.0230276</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Milan Wiedemann, Graham M Thew, Mental Health Research UK, Wellcome Trust.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
