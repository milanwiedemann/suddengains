<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot average change in variables around the sudden gain — plot_sg • suddengains</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plot average change in variables around the sudden gain — plot_sg" />
<meta property="og:description" content="Generates a plot of the mean values around the sudden gain using ggplot.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with &quot;group&quot; allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">suddengains</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/shinygains.html">shinygains: An interactive illustration of the suddengains R package</a>
    </li>
    <li>
      <a href="../articles/suddengains-tutorial.html">A tutorial on using the suddengains R package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/milanwiedemann/suddengains/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot average change in variables around the sudden gain</h1>
    <small class="dont-index">Source: <a href='https://github.com/milanwiedemann/suddengains/blob/master/R/plot_sg.R'><code>R/plot_sg.R</code></a></small>
    <div class="hidden name"><code>plot_sg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generates a plot of the mean values around the sudden gain using <code><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></code>.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.</p>
    </div>

    <pre class="usage"><span class='fu'>plot_sg</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>id_var_name</span>,
  <span class='va'>tx_start_var_name</span>,
  <span class='va'>tx_end_var_name</span>,
  <span class='va'>sg_pre_post_var_list</span>,
  <span class='va'>ylab</span>,
  xlab <span class='op'>=</span> <span class='st'>"Session"</span>,
  colour_single <span class='op'>=</span> <span class='st'>"#239b89ff"</span>,
  colour_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"viridis"</span>, <span class='st'>"ggplot"</span>, <span class='st'>"grey"</span><span class='op'>)</span>,
  viridis_option <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"D"</span>, <span class='st'>"A"</span>, <span class='st'>"B"</span>, <span class='st'>"C"</span><span class='op'>)</span>,
  viridis_begin <span class='op'>=</span> <span class='fl'>0</span>,
  viridis_end <span class='op'>=</span> <span class='fl'>1</span>,
  group_var_name <span class='op'>=</span> <span class='cn'>NULL</span>,
  group_levels <span class='op'>=</span> <span class='cn'>NULL</span>,
  group_labels <span class='op'>=</span> <span class='cn'>NULL</span>,
  group_title <span class='op'>=</span> <span class='cn'>NULL</span>,
  apaish <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A <code>bysg</code> or <code>byperson</code> dataset created using the function <code><a href='create_bysg.html'>create_bysg</a></code> or <code><a href='create_byperson.html'>create_byperson</a></code>.</p></td>
    </tr>
    <tr>
      <th>id_var_name</th>
      <td><p>String, specifying the name of the ID variable.</p></td>
    </tr>
    <tr>
      <th>tx_start_var_name</th>
      <td><p>String, specifying the variable name of the first measurement point of the intervention.</p></td>
    </tr>
    <tr>
      <th>tx_end_var_name</th>
      <td><p>String, specifying the variable name of the last measurement point of the intervention.</p></td>
    </tr>
    <tr>
      <th>sg_pre_post_var_list</th>
      <td><p>Vector, specifying the variable names of the 3 measurement points before,
and the 3 after the sudden gain, for the measure being plotted.</p></td>
    </tr>
    <tr>
      <th>ylab</th>
      <td><p>String, specifying the label for the y axis i.e. the name of the measure being plotted.</p></td>
    </tr>
    <tr>
      <th>xlab</th>
      <td><p>String, specifying the label for the x axis, e.g. <code>"Session"</code>.</p></td>
    </tr>
    <tr>
      <th>colour_single</th>
      <td><p>String, specifying the colour of the plot for one group.</p></td>
    </tr>
    <tr>
      <th>colour_group</th>
      <td><p>String, specifying the discrete colour palette to be used for the groups.</p></td>
    </tr>
    <tr>
      <th>viridis_option</th>
      <td><p>String specifying the colour option for discrete viridis palette, see <code><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></code>.</p></td>
    </tr>
    <tr>
      <th>viridis_begin</th>
      <td><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap begins, see <code><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></code>.</p></td>
    </tr>
    <tr>
      <th>viridis_end</th>
      <td><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap ends, see <code><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_d</a></code>.</p></td>
    </tr>
    <tr>
      <th>group_var_name</th>
      <td><p>String, specifying the variable name of the group variable.</p></td>
    </tr>
    <tr>
      <th>group_levels</th>
      <td><p>Vector, specifying the levels as numeric for the groups in <code>group_var_name</code>.</p></td>
    </tr>
    <tr>
      <th>group_labels</th>
      <td><p>Vector, specifying the label names as strings for the groups in <code>group_var_name</code>.</p></td>
    </tr>
    <tr>
      <th>group_title</th>
      <td><p>String, specifying the title that will be used for the groups specified in <code>group_labels</code>.</p></td>
    </tr>
    <tr>
      <th>apaish</th>
      <td><p>Logical, make plot APA publishable.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A plot of the mean values around the sudden gain, for the measure specified.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># First create a bysg (or byperson) dataset</span>
<span class='va'>bysg</span> <span class='op'>&lt;-</span> <span class='fu'><a href='create_bysg.html'>create_bysg</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>sgdata</span>,
                    sg_crit1_cutoff <span class='op'>=</span> <span class='fl'>7</span>,
                    id_var_name <span class='op'>=</span> <span class='st'>"id"</span>,
                    tx_start_var_name <span class='op'>=</span> <span class='st'>"bdi_s1"</span>,
                    tx_end_var_name <span class='op'>=</span> <span class='st'>"bdi_s12"</span>,
                    sg_var_list <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bdi_s1"</span>, <span class='st'>"bdi_s2"</span>, <span class='st'>"bdi_s3"</span>,
                                    <span class='st'>"bdi_s4"</span>, <span class='st'>"bdi_s5"</span>, <span class='st'>"bdi_s6"</span>,
                                    <span class='st'>"bdi_s7"</span>, <span class='st'>"bdi_s8"</span>, <span class='st'>"bdi_s9"</span>,
                                    <span class='st'>"bdi_s10"</span>, <span class='st'>"bdi_s11"</span>, <span class='st'>"bdi_s12"</span><span class='op'>)</span>,
                    sg_measure_name <span class='op'>=</span> <span class='st'>"bdi"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>First, second, and third sudden gains criteria were applied.</span></div><div class='output co'>#&gt; <span class='message'>The critical value for the third criterion was adjusted for missingness.</span></div><div class='input'>
<span class='co'># Plot average change of BDI values around the period of the sudden gain</span>
<span class='fu'>plot_sg</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>bysg</span>,
        id_var_name <span class='op'>=</span> <span class='st'>"id"</span>,
        tx_start_var_name <span class='op'>=</span> <span class='st'>"bdi_s1"</span>,
        tx_end_var_name <span class='op'>=</span> <span class='st'>"bdi_s12"</span>,
        sg_pre_post_var_list <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"sg_bdi_2n"</span>, <span class='st'>"sg_bdi_1n"</span>, <span class='st'>"sg_bdi_n"</span>,
                                 <span class='st'>"sg_bdi_n1"</span>, <span class='st'>"sg_bdi_n2"</span>, <span class='st'>"sg_bdi_n3"</span><span class='op'>)</span>,
        ylab <span class='op'>=</span> <span class='st'>"BDI"</span>, xlab <span class='op'>=</span> <span class='st'>"Session"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 27 rows containing non-finite values (stat_summary).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 27 rows containing non-finite values (stat_summary).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 14 rows containing non-finite values (stat_summary).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 8 rows containing non-finite values (stat_summary).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 10 rows containing non-finite values (stat_summary).</span></div><div class='img'><img src='plot_sg-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Milan Wiedemann, Graham M Thew, Mental Health Research UK, Wellcome Trust.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


