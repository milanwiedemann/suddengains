<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Generates a plot of the mean values around the sudden gain using ggplot.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.'><title>Plot average change in variables around the sudden gain — plot_sg • suddengains</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot average change in variables around the sudden gain — plot_sg"><meta property="og:description" content='Generates a plot of the mean values around the sudden gain using ggplot.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">suddengains</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/shinygains.html">shinygains: An interactive illustration of the suddengains R package</a>
    <a class="dropdown-item" href="../articles/suddengains-tutorial.html">A tutorial on using the suddengains R package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/milanwiedemann/suddengains/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Plot average change in variables around the sudden gain</h1>
      <small class="dont-index">Source: <a href="https://github.com/milanwiedemann/suddengains/blob/HEAD/R/plot_sg.R" class="external-link"><code>R/plot_sg.R</code></a></small>
      <div class="d-none name"><code>plot_sg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a plot of the mean values around the sudden gain using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></code>.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_sg</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">id_var_name</span>,</span>
<span>  <span class="va">tx_start_var_name</span>,</span>
<span>  <span class="va">tx_end_var_name</span>,</span>
<span>  <span class="va">sg_pre_post_var_list</span>,</span>
<span>  <span class="va">ylab</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Session"</span>,</span>
<span>  colour_single <span class="op">=</span> <span class="st">"#239b89ff"</span>,</span>
<span>  colour_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"viridis"</span>, <span class="st">"ggplot"</span>, <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>  viridis_option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"D"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  viridis_begin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  viridis_end <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  group_var_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  apaish <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A <code>bysg</code> or <code>byperson</code> dataset created using the function <code><a href="create_bysg.html">create_bysg</a></code> or <code><a href="create_byperson.html">create_byperson</a></code>.</p></dd>


<dt>id_var_name</dt>
<dd><p>String, specifying the name of the ID variable.</p></dd>


<dt>tx_start_var_name</dt>
<dd><p>String, specifying the variable name of the first measurement point of the intervention.</p></dd>


<dt>tx_end_var_name</dt>
<dd><p>String, specifying the variable name of the last measurement point of the intervention.</p></dd>


<dt>sg_pre_post_var_list</dt>
<dd><p>Vector, specifying the variable names of the 3 measurement points before,
and the 3 after the sudden gain, for the measure being plotted.</p></dd>


<dt>ylab</dt>
<dd><p>String, specifying the label for the y axis i.e. the name of the measure being plotted.</p></dd>


<dt>xlab</dt>
<dd><p>String, specifying the label for the x axis, e.g. <code>"Session"</code>.</p></dd>


<dt>colour_single</dt>
<dd><p>String, specifying the colour of the plot for one group.</p></dd>


<dt>colour_group</dt>
<dd><p>String, specifying the discrete colour palette to be used for the groups.</p></dd>


<dt>viridis_option</dt>
<dd><p>String specifying the colour option for discrete viridis palette, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt>viridis_begin</dt>
<dd><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap begins, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt>viridis_end</dt>
<dd><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap ends, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt>group_var_name</dt>
<dd><p>String, specifying the variable name of the group variable.</p></dd>


<dt>group_levels</dt>
<dd><p>Vector, specifying the levels as numeric for the groups in <code>group_var_name</code>.</p></dd>


<dt>group_labels</dt>
<dd><p>Vector, specifying the label names as strings for the groups in <code>group_var_name</code>.</p></dd>


<dt>group_title</dt>
<dd><p>String, specifying the title that will be used for the groups specified in <code>group_labels</code>.</p></dd>


<dt>apaish</dt>
<dd><p>Logical, make plot APA publishable.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A plot of the mean values around the sudden gain, for the measure specified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create a bysg (or byperson) dataset</span></span></span>
<span class="r-in"><span><span class="va">bysg</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_bysg.html">create_bysg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span></span>
<span class="r-in"><span>                    sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                    id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>                    tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span></span>
<span class="r-in"><span>                    tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span></span>
<span class="r-in"><span>                    sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s4"</span>, <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, <span class="st">"bdi_s9"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> First, second, and third sudden gains criteria were applied.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The critical value for the third criterion was adjusted for missingness.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot average change of BDI values around the period of the sudden gain</span></span></span>
<span class="r-in"><span><span class="fu">plot_sg</span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg</span>,</span></span>
<span class="r-in"><span>        id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>        tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span></span>
<span class="r-in"><span>        tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span></span>
<span class="r-in"><span>        sg_pre_post_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg_bdi_2n"</span>, <span class="st">"sg_bdi_1n"</span>, <span class="st">"sg_bdi_n"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"sg_bdi_n1"</span>, <span class="st">"sg_bdi_n2"</span>, <span class="st">"sg_bdi_n3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        ylab <span class="op">=</span> <span class="st">"BDI"</span>, xlab <span class="op">=</span> <span class="st">"Session"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 27 rows containing non-finite values (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 27 rows containing non-finite values (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 14 rows containing non-finite values (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 8 rows containing non-finite values (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 10 rows containing non-finite values (`stat_summary()`).</span>
<span class="r-plt img"><img src="plot_sg-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Milan Wiedemann, Graham M Thew, Mental Health Research UK, Wellcome Trust.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

