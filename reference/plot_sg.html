<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot average change in variables around the sudden gain — plot_sg • suddengains</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot average change in variables around the sudden gain — plot_sg"><meta name="description" content='Generates a plot of the mean values around the sudden gain using ggplot.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.'><meta property="og:description" content='Generates a plot of the mean values around the sudden gain using ggplot.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">suddengains</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/shinygains.html">shinygains: An interactive illustration of the suddengains R package</a></li>
    <li><a class="dropdown-item" href="../articles/suddengains-tutorial.html">A tutorial on using the suddengains R package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/milanwiedemann/suddengains/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot average change in variables around the sudden gain</h1>
      <small class="dont-index">Source: <a href="https://github.com/milanwiedemann/suddengains/blob/main/R/plot_sg.R" class="external-link"><code>R/plot_sg.R</code></a></small>
      <div class="d-none name"><code>plot_sg.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a plot of the mean values around the sudden gain using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></code>.
This can be used to plot the primary outcome or secondary measures.
The parameters starting with "group" allow to plot the average gain magnitude by group.
Further ggplot2 components can be added using + following this function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_sg</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">id_var_name</span>,</span>
<span>  <span class="va">tx_start_var_name</span>,</span>
<span>  <span class="va">tx_end_var_name</span>,</span>
<span>  <span class="va">sg_pre_post_var_list</span>,</span>
<span>  <span class="va">ylab</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Session"</span>,</span>
<span>  colour_single <span class="op">=</span> <span class="st">"#239b89ff"</span>,</span>
<span>  colour_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"viridis"</span>, <span class="st">"ggplot"</span>, <span class="st">"grey"</span><span class="op">)</span>,</span>
<span>  viridis_option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"D"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  viridis_begin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  viridis_end <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  group_var_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  apaish <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>bysg</code> or <code>byperson</code> dataset created using the function <code><a href="create_bysg.html">create_bysg</a></code> or <code><a href="create_byperson.html">create_byperson</a></code>.</p></dd>


<dt id="arg-id-var-name">id_var_name<a class="anchor" aria-label="anchor" href="#arg-id-var-name"></a></dt>
<dd><p>String, specifying the name of the ID variable.</p></dd>


<dt id="arg-tx-start-var-name">tx_start_var_name<a class="anchor" aria-label="anchor" href="#arg-tx-start-var-name"></a></dt>
<dd><p>String, specifying the variable name of the first measurement point of the intervention.</p></dd>


<dt id="arg-tx-end-var-name">tx_end_var_name<a class="anchor" aria-label="anchor" href="#arg-tx-end-var-name"></a></dt>
<dd><p>String, specifying the variable name of the last measurement point of the intervention.</p></dd>


<dt id="arg-sg-pre-post-var-list">sg_pre_post_var_list<a class="anchor" aria-label="anchor" href="#arg-sg-pre-post-var-list"></a></dt>
<dd><p>Vector, specifying the variable names of the 3 measurement points before,
and the 3 after the sudden gain, for the measure being plotted.</p></dd>


<dt id="arg-ylab">ylab<a class="anchor" aria-label="anchor" href="#arg-ylab"></a></dt>
<dd><p>String, specifying the label for the y axis i.e. the name of the measure being plotted.</p></dd>


<dt id="arg-xlab">xlab<a class="anchor" aria-label="anchor" href="#arg-xlab"></a></dt>
<dd><p>String, specifying the label for the x axis, e.g. <code>"Session"</code>.</p></dd>


<dt id="arg-colour-single">colour_single<a class="anchor" aria-label="anchor" href="#arg-colour-single"></a></dt>
<dd><p>String, specifying the colour of the plot for one group.</p></dd>


<dt id="arg-colour-group">colour_group<a class="anchor" aria-label="anchor" href="#arg-colour-group"></a></dt>
<dd><p>String, specifying the discrete colour palette to be used for the groups.</p></dd>


<dt id="arg-viridis-option">viridis_option<a class="anchor" aria-label="anchor" href="#arg-viridis-option"></a></dt>
<dd><p>String specifying the colour option for discrete viridis palette, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt id="arg-viridis-begin">viridis_begin<a class="anchor" aria-label="anchor" href="#arg-viridis-begin"></a></dt>
<dd><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap begins, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt id="arg-viridis-end">viridis_end<a class="anchor" aria-label="anchor" href="#arg-viridis-end"></a></dt>
<dd><p>Numeric, specifying hue between 0 and 1 at which the viridis colormap ends, see <code><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></code>.</p></dd>


<dt id="arg-group-var-name">group_var_name<a class="anchor" aria-label="anchor" href="#arg-group-var-name"></a></dt>
<dd><p>String, specifying the variable name of the group variable.</p></dd>


<dt id="arg-group-levels">group_levels<a class="anchor" aria-label="anchor" href="#arg-group-levels"></a></dt>
<dd><p>Vector, specifying the levels as numeric for the groups in <code>group_var_name</code>.</p></dd>


<dt id="arg-group-labels">group_labels<a class="anchor" aria-label="anchor" href="#arg-group-labels"></a></dt>
<dd><p>Vector, specifying the label names as strings for the groups in <code>group_var_name</code>.</p></dd>


<dt id="arg-group-title">group_title<a class="anchor" aria-label="anchor" href="#arg-group-title"></a></dt>
<dd><p>String, specifying the title that will be used for the groups specified in <code>group_labels</code>.</p></dd>


<dt id="arg-apaish">apaish<a class="anchor" aria-label="anchor" href="#arg-apaish"></a></dt>
<dd><p>Logical, make plot APA publishable.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A plot of the mean values around the sudden gain, for the measure specified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># First create a bysg (or byperson) dataset</span></span></span>
<span class="r-in"><span><span class="va">bysg</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_bysg.html">create_bysg</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span></span>
<span class="r-in"><span>                    sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>                    id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>                    tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span></span>
<span class="r-in"><span>                    tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span></span>
<span class="r-in"><span>                    sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s4"</span>, <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>, <span class="st">"bdi_s9"</span>,</span></span>
<span class="r-in"><span>                                    <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> First, second, and third sudden gains criteria were applied.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The critical value for the third criterion was adjusted for missingness.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot average change of BDI values around the period of the sudden gain</span></span></span>
<span class="r-in"><span><span class="fu">plot_sg</span><span class="op">(</span>data <span class="op">=</span> <span class="va">bysg</span>,</span></span>
<span class="r-in"><span>        id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>        tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span></span>
<span class="r-in"><span>        tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span></span>
<span class="r-in"><span>        sg_pre_post_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg_bdi_2n"</span>, <span class="st">"sg_bdi_1n"</span>, <span class="st">"sg_bdi_n"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"sg_bdi_n1"</span>, <span class="st">"sg_bdi_n2"</span>, <span class="st">"sg_bdi_n3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        ylab <span class="op">=</span> <span class="st">"BDI"</span>, xlab <span class="op">=</span> <span class="st">"Session"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 27 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 27 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 14 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 8 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary()`).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 10 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary()`).</span>
<span class="r-plt img"><img src="plot_sg-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Milan Wiedemann, Graham M Thew, Mental Health Research UK, Wellcome Trust.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

