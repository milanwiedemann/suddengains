<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Writes a data frame as a specified file type."><title>Write a sudden gains data frame (byperson) to CSV, SPSS, STATA or Excel files — write_byperson • suddengains</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Write a sudden gains data frame (byperson) to CSV, SPSS, STATA or Excel files — write_byperson"><meta property="og:description" content="Writes a data frame as a specified file type."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">suddengains</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/shinygains.html">shinygains: An interactive illustration of the suddengains R package</a>
    <a class="dropdown-item" href="../articles/suddengains-tutorial.html">A tutorial on using the suddengains R package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/milanwiedemann/suddengains/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Write a sudden gains data frame (byperson) to CSV, SPSS, STATA or Excel files</h1>
      <small class="dont-index">Source: <a href="https://github.com/milanwiedemann/suddengains/blob/HEAD/R/write_byperson.R" class="external-link"><code>R/write_byperson.R</code></a></small>
      <div class="d-none name"><code>write_byperson.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Writes a data frame as a specified file type.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">write_byperson</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">sg_crit1_cutoff</span>,</span>
<span>  <span class="va">id_var_name</span>,</span>
<span>  <span class="va">sg_var_list</span>,</span>
<span>  <span class="va">tx_start_var_name</span>,</span>
<span>  <span class="va">tx_end_var_name</span>,</span>
<span>  <span class="va">sg_measure_name</span>,</span>
<span>  sg_crit2_pct <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  sg_crit3 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sg_crit3_alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  sg_crit3_adjust <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  sg_crit3_critical_value <span class="op">=</span> <span class="fl">2.776</span>,</span>
<span>  identify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sg"</span>, <span class="st">"sl"</span><span class="op">)</span>,</span>
<span>  identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  multiple_sg_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"first"</span>, <span class="st">"last"</span>, <span class="st">"smallest"</span>, <span class="st">"largest"</span><span class="op">)</span>,</span>
<span>  data_is_bysg <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CSV"</span>, <span class="st">"SPSS"</span>, <span class="st">"STATA"</span>, <span class="st">"Excel"</span><span class="op">)</span>,</span>
<span>  <span class="va">path</span>,</span>
<span>  stata_version <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data set in wide format including an ID variable and variables for each measurement point.</p></dd>


<dt>sg_crit1_cutoff</dt>
<dd><p>Numeric, specifying the cut-off value to be used for the first sudden gains criterion.
The function <code><a href="define_crit1_cutoff.html">define_crit1_cutoff</a></code> can be used to calculate a cutoff value based on the Reliable Change Index (RCI; Jacobson &amp; Truax, 1991).
If set to <code>NULL</code> the first criterion wont be applied.</p></dd>


<dt>id_var_name</dt>
<dd><p>String, specifying the name of the ID variable. Each row should have a unique value.</p></dd>


<dt>sg_var_list</dt>
<dd><p>Vector, specifying the variable names of each measurement point sequentially.</p></dd>


<dt>tx_start_var_name</dt>
<dd><p>String, specifying the variable name of the first measurement point of the intervention.</p></dd>


<dt>tx_end_var_name</dt>
<dd><p>String, specifying the variable name of the last measurement point of the intervention.</p></dd>


<dt>sg_measure_name</dt>
<dd><p>String, specifying the name of the measure used to identify sudden gains/losses.</p></dd>


<dt>sg_crit2_pct</dt>
<dd><p>Numeric, specifying the percentage change to be used for the second sudden gains/losses criterion.
If set to <code>NULL</code> the second criterion wont be applied.</p></dd>


<dt>sg_crit3</dt>
<dd><p>If set to <code>TRUE</code> the third criterion will be applied automatically adjusting the critical value for missingness.
If set to <code>FALSE</code> the third criterion wont be applied.</p></dd>


<dt>sg_crit3_alpha</dt>
<dd><p>Numeric, alpha for the student t-test (two-tailed) to determine the critical value to be used for the third criterion.
Degrees of freedom are based on the number of available data in the three sessions preceding the gain and the three sessions following the gain.</p></dd>


<dt>sg_crit3_adjust</dt>
<dd><p>Logical, specify whether critical value gets adjusted for missingness, see Lutz et al. (2013) and the documentation of this R package for further details.
This argument is set to <code>TRUE</code> by default adjusting the critical value for missingness as described in the package documentation and Lutz et al. (2013):
A critical value of 2.776 is used when all three data points before and after a potential gain are available,
where one data point is missing either before or after a potential gain a critical value of 3.182 is used,
and where one data point is missing both before and after the gain a critical value of 4.303 is used (for sg_crit3_alpha = 0.05).
If set to <code>FALSE</code> the critical value set in <code>sg_crit3_critical_value</code> will instead be used for all comparisons, regardless of missingnes in the sequence of data points that are investigated for potential sudden gains.</p></dd>


<dt>sg_crit3_critical_value</dt>
<dd><p>Numeric, specifying the critical value to instead be used for all comparisons, regardless of missingnes in the sequence of data points that are investigated for potential sudden gains.#'</p></dd>


<dt>identify</dt>
<dd><p>String, specifying whether to identify sudden gains (<code>"sg"</code>) using <code><a href="identify_sg.html">identify_sg</a></code> or sudden losses (<code>"sl"</code>) using <code><a href="identify_sl.html">identify_sl</a></code>.
The default is to identify sudden gains (<code>"sg"</code>).</p></dd>


<dt>identify_sg_1to2</dt>
<dd><p>Logical, indicating whether to identify sudden losses from measurement point 1 to 2.</p></dd>


<dt>multiple_sg_select</dt>
<dd><p>String, specifying which sudden gain/loss to select for this data set if more than one gain/loss was identified per case.
Options are: <code>"first"</code>, <code>"last"</code>, <code>"smallest"</code>, or <code>"largest"</code>, <code><a href="create_byperson.html">create_byperson</a></code>.</p></dd>


<dt>data_is_bysg</dt>
<dd><p>Logical, specifying whether the data set in the <code>data</code> argument is a bysg data set created using the <code><a href="create_bysg.html">create_bysg</a></code> function.</p></dd>


<dt>format</dt>
<dd><p>String, specifying the format of the data file, <code>"CSV"</code>, <code>"SPSS"</code>, <code>"STATA"</code> or <code>"Excel"</code>.</p></dd>


<dt>path</dt>
<dd><p>String, specifying the file name ending with the matching file extension,
<code>".csv"</code>, <code>".sav"</code>, <code>".dta"</code> or <code>".xlsx"</code>.</p></dd>


<dt>stata_version</dt>
<dd><p>Numeric, specifying STATA version number.</p></dd>


<dt>...</dt>
<dd><p>Additional parameters to be passed on to the specified write function,
see <code><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></code> for <code>"CSV"</code>, <code><a href="https://haven.tidyverse.org/reference/read_spss.html" class="external-link">write_sav</a></code> for <code>"SPSS"</code>, <code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">write_dta</a></code> for <code>"STATA"</code> or <code><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html" class="external-link">write_xlsx</a></code> for <code>"Excel"</code>
for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Tang, T. Z., &amp; DeRubeis, R. J. (1999). Sudden gains and critical sessions in cognitive-behavioral therapy for depression. Journal of Consulting and Clinical Psychology, 67(6), 894–904. <a href="https://doi.org/10.1037/0022-006X.67.6.894" class="external-link">doi:10.1037/0022-006X.67.6.894</a>
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Adjust "path" argument before running</span></span></span>
<span class="r-in"><span><span class="co"># Create character string name for temporary "byperson.csv" file</span></span></span>
<span class="r-in"><span><span class="va">temp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"byperson"</span>, fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Write byperson dataset (CSV file)</span></span></span>
<span class="r-in"><span><span class="co"># To write a different format change the 'format' argument ...</span></span></span>
<span class="r-in"><span><span class="co"># ... as well as the file extension in the 'path' argument</span></span></span>
<span class="r-in"><span><span class="fu">write_byperson</span><span class="op">(</span>data <span class="op">=</span> <span class="va">sgdata</span>,</span></span>
<span class="r-in"><span>               sg_crit1_cutoff <span class="op">=</span> <span class="fl">7</span>,</span></span>
<span class="r-in"><span>               id_var_name <span class="op">=</span> <span class="st">"id"</span>,</span></span>
<span class="r-in"><span>               tx_start_var_name <span class="op">=</span> <span class="st">"bdi_s1"</span>,</span></span>
<span class="r-in"><span>               tx_end_var_name <span class="op">=</span> <span class="st">"bdi_s12"</span>,</span></span>
<span class="r-in"><span>               sg_var_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bdi_s1"</span>, <span class="st">"bdi_s2"</span>, <span class="st">"bdi_s3"</span>, <span class="st">"bdi_s4"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"bdi_s5"</span>, <span class="st">"bdi_s6"</span>, <span class="st">"bdi_s7"</span>, <span class="st">"bdi_s8"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"bdi_s9"</span>, <span class="st">"bdi_s10"</span>, <span class="st">"bdi_s11"</span>, <span class="st">"bdi_s12"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>               sg_measure_name <span class="op">=</span> <span class="st">"bdi"</span>,</span></span>
<span class="r-in"><span>               identify_sg_1to2 <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>               multiple_sg_select <span class="op">=</span> <span class="st">"largest"</span>,</span></span>
<span class="r-in"><span>               format <span class="op">=</span> <span class="st">"CSV"</span>,</span></span>
<span class="r-in"><span>               path <span class="op">=</span> <span class="va">temp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> First, second, and third sudden gains criteria were applied.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The critical value for the third criterion was adjusted for missingness.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The first gain/loss was selected in case of multiple gains/losses.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The `path` argument of `write_csv()` is deprecated as of readr 1.4.0.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Please use the `file` argument instead.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> The deprecated feature was likely used in the <span style="color: #0000BB;">suddengains</span> package.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   Please report the issue at</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   <span style="color: #0000BB; font-style: italic;">&lt;https://github.com/milanwiedemann/suddengains/issues&gt;</span>.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Milan Wiedemann, Graham M Thew, Mental Health Research UK, Wellcome Trust.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

